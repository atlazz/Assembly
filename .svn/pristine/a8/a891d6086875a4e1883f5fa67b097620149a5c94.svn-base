window.__require=function e(t,o,i){function n(s,c){if(!o[s]){if(!t[s]){var r=s.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!c&&l)return l(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+s+"'")}}var u=o[s]={exports:{}};t[s][0].call(u.exports,function(e){return n(t[s][1][e]||e)},u,u.exports,e,t,o,i)}return o[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<i.length;s++)n(i[s]);return n}({Ad:[function(e,t,o){"use strict";cc._RF.push(t,"51918kAgyxNQKDOyGTjLWyP","Ad"),Object.defineProperty(o,"__esModule",{value:!0});var i,n=e("../SDK/wx"),a=e("../SDK/ws"),s=e("../Global"),c=!0,r=null,l=0,u={},d={},f={},h={};o.randomlyGetBanner=function(e){if(n.default.createBannerAd){if(0===Object.keys(d).length)for(var t=1;t<=s.default.config.banner_number;t++)d[t]=s.default.config.banner[t],console.log("init uid: ",t,d[t]),u[t]=o.wxCreatBanner(d[t]),console.log("init bannerAD: ",t,u[t]),f[t]=0,h[t]=0,u[t].onError(function(e){console.log("banner onError :",e)});i=Math.ceil(Math.random()*s.default.config.banner_number),"home"==e&&(f[i]>=s.default.config.show_number&&(u[i]&&u[i].destroy(),u[i]=o.wxCreatBanner(d[i]),f[i]=0),f[i]++)}},o.wxCreatBanner=function(e){if(n.default.createBannerAd){var t=n.default.getSystemInfoSync(),o=t.screenHeight,i=t.screenWidth,a=Math.max(300,300*i/350),s=.348*a,c=o-s,r=(i-a)/2;return n.default.createBannerAd({adUnitId:e,style:{left:r,top:c,width:a,height:s}})}},o.setStyle=function(e,t,o){if(e){var i=n.default.getSystemInfoSync(),a=i.screenHeight,s=i.screenWidth,c=s;t&&(c=Math.max(300,300*s/350));var r=.348*c,l=a-r;-1!==o&&(l=o/cc.winSize.height*a);var u=(s-c)/2;e.style.left=u,e.style.top=l,e.style.width=c,e.style.height=r}},o.showBanner=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=-1),o.setStyle(u[i],e,t),u[i]&&u[i].show(),console.log("show banner uid: ",i,"bannerAD: ",u[i])},o.hideBanner=function(){for(var e=1;e<=Object.keys(u).length;e++)u[e]&&u[e].hide()},o.refreshCurrentBanner=function(){l++,r&&l>=s.default.config.banner_click_time&&(l=0,o.posShowBanner(r,!0))},o.hasVideoAd=function(){return c},o.posShowBanner=function(e,t){void 0===t&&(t=!1);var o=n.default.getSystemInfoSync(),i=o.screenHeight,s=o.screenWidth,c=Math.max(300,300*s/350),l=.348*c,u=i-l,d=(s-c)/2;return r=e,a.default.createBanner({pos:e,style:{left:d,top:u,width:c,height:l},force:t})},o.posHideBanner=function(e){r=null,a.default.closeBanner(e)},o.posShowVideo=function(e,t,o){a.default.createVideo?a.default.createVideo({pos:e,success:function(e){o&&o(e)},fail:function(e){c=!1,console.log("NO VIDEO AD"),console.log("error res: ",e),s.default.gameData.videoCount<=11?a.default.traceEvent("errVideoCnt_"+s.default.gameData.videoCount):a.default.traceEvent("errVideoCnt_11"),e&&e.errMsg&&(a.default.traceEvent("errCode_"+e.errCode),console.log("errCode: "+e.errCode),console.log("errMsg: "+e.errMsg)),t&&t()}}):(c=!1,console.log("NO VIDEO AD"),t&&t())},cc._RF.pop()},{"../Global":"Global","../SDK/ws":"ws","../SDK/wx":"wx"}],AudioMgr:[function(e,t,o){"use strict";cc._RF.push(t,"34dd84xfN9Lx6Qxdb19GlMS","AudioMgr"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.button=null,t.close=null,t.hint=null,t.move=null,t.win=null,t.starin=null,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){!o.instance&&(o.instance=this)},t.prototype.play=function(e){switch(e){case"button":cc.audioEngine.playEffect(this.button,!1);break;case"close":cc.audioEngine.playEffect(this.close,!1);break;case"hint":cc.audioEngine.playEffect(this.hint,!1);break;case"move":cc.audioEngine.playEffect(this.move,!1);break;case"win":cc.audioEngine.playEffect(this.win,!1);break;case"starin":cc.audioEngine.playEffect(this.starin,!1)}},t.prototype.closeAll=function(){cc.audioEngine.stopAllEffects()},__decorate([a({type:cc.AudioClip})],t.prototype,"button",void 0),__decorate([a({type:cc.AudioClip})],t.prototype,"close",void 0),__decorate([a({type:cc.AudioClip})],t.prototype,"hint",void 0),__decorate([a({type:cc.AudioClip})],t.prototype,"move",void 0),__decorate([a({type:cc.AudioClip})],t.prototype,"win",void 0),__decorate([a({type:cc.AudioClip})],t.prototype,"starin",void 0),t=o=__decorate([n],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],BtnAni:[function(e,t,o){"use strict";cc._RF.push(t,"4710delrG5OxY9o3bsYfZSV","BtnAni"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playFrame=[],t.maxScale=.95,t.minScale=1.05,t.frameIdx=0,t}return __extends(t,e),t.prototype.start=function(){var e=this;this.sprite=this.node.getComponent(cc.Sprite),this.schedule(function(){e.sprite.spriteFrame=e.playFrame[e.frameIdx],e.frameIdx=++e.frameIdx%3},.15,cc.macro.REPEAT_FOREVER,0),this.node.runAction(cc.sequence(cc.scaleTo(.25,this.minScale),cc.scaleTo(.5,this.maxScale),cc.scaleTo(.25,1)).repeatForever())},__decorate([a({type:Array(cc.SpriteFrame),tooltip:"btn sprite frames",serializable:!0})],t.prototype,"playFrame",void 0),__decorate([a()],t.prototype,"maxScale",void 0),__decorate([a()],t.prototype,"minScale",void 0),t=__decorate([n],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],CCInspectorPluginMsg:[function(e,t,o){"use strict";cc._RF.push(t,"fff68s/PrhIpalYYEBtort+","CCInspectorPluginMsg"),t.exports={Msg:{Test:0,GetTreeInfo:1,GetNodeInfo:2,Active:100,Position:101,Rotation:102,Scale:103,Anchor:104,Size:105,Color:106,Opacity:107,Skew:108}},cc._RF.pop()},{}],Const:[function(e,t,o){"use strict";cc._RF.push(t,"c9ad1AMwpJJgbaZNmgGQGMg","Const"),Object.defineProperty(o,"__esModule",{value:!0}),o.VERSION="1.0.2",o.State={PLAYING:1},o.TutorialLvl=[1,5],o.WinDeltaDist=50,o.WinDeltaAngle=30,cc._RF.pop()},{}],GameView:[function(e,t,o){"use strict";cc._RF.push(t,"817f5S5x1NCRa/57fklU7MI","GameView"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../Global"),n=e("../Const"),a=e("./LvlSelect"),s=e("./OverView"),c=e("../component/ScrollViewBetter"),r=e("../component/AudioMgr"),l=e("../SDK/wx"),u=e("../SDK/ws"),d=e("../component/Loading"),f=e("../component/Reward"),h=cc._decorator,p=h.ccclass,v=h.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_back=null,t.btn_restart=null,t.btn_hint=null,t.progressBar=null,t.frame_solution=null,t.frame_question=null,t.title=null,t.lvlLabel=null,t.tips=null,t.container=null,t.completeIcon=null,t.flash=null,t.mask1=null,t.mask2=null,t.line_left=null,t.line_right=null,t.line_left2=null,t.line_right2=null,t.line_rotate=null,t.finger=null,t.HomeView=null,t.LvlSelectView=null,t.OverView=null,t.winStep=.1,t.winStep_preload=.1,t.canTouch=!0,t.touchID=null,t}var o;return __extends(t,e),o=t,t.prototype.start=function(){!this.lvlSelectScript&&(this.lvlSelectScript=this.LvlSelectView.getComponent(a.default)),this.overScript=this.OverView.getComponent(s.default),this.addBtnListener(),this.addRotListener(),this.btn_hint.runAction(cc.sequence(cc.scaleTo(.5,1.3),cc.scaleTo(.5,1)).repeatForever())},t.prototype.startGame=function(e){if(e&&(this.level=e),this.level>i.default.config.MaxLevel)return console.log("over max level",this.level),this.node.active=!1,void(this.LvlSelectView.active=!0);console.log("gameStart. level: ",this.level),this.lvlLabel.getComponent(cc.Label).string="\u7b2c "+this.level+" \u5173",this.loadTimeStamp=Date.now(),this.loadStage(this.level,this.loadTimeStamp,!1)},t.prototype.nextGame=function(){if(this.level++,this.level>i.default.config.MaxLevel)return console.log("over max level",this.level),this.node.active=!1,void(this.LvlSelectView.active=!0);this.startGame()},t.prototype.restartGame=function(){var e=this;Object.keys(this.items).forEach(function(t){e.items[t].runAction(cc.moveTo(.2,e.lvlConf.question[t].posX,e.lvlConf.question[t].posY)),e.items[t].runAction(cc.rotateTo(.2,e.lvlConf.question[t].rot))}),this.selected&&(this.items[this.selected].color=new cc.Color(255,255,255)),this.reset(),n.TutorialLvl.indexOf(this.level)>=0&&this.schedule(function(){e.showTutorial(e.level)},.21,0)},t.prototype.reset=function(){this.isWin=!1,!this.winBar&&(this.winBar=this.progressBar.getComponent(cc.ProgressBar)),this.completeIcon.active=!1,this.winBar.progress=0,this.selected=null,this.btn_restart.active=!1,this.btn_back.active=!0,this.tips.active=!1,this.btn_hint.active=!0,this.flash.active=!1,this.canTouch=!0},t.prototype.showNetErr=function(){l.default.showToast&&l.default.showToast({title:"\u8bf7\u68c0\u67e5\u7f51\u7edc",icon:"fail"})},t.prototype.hideTutorial=function(){this.mask1.active=!1,this.mask2.active=!1,this.line_left.active=!1,this.line_right.active=!1,this.line_rotate.active=!1,this.finger.active=!1,this.finger.stopAllActions(),this.unscheduleAllCallbacks()},t.prototype.showTutorial=function(e){var t=this;switch(this.hideTutorial(),e){case 1:this.mask1.active=!0;var o=this.container.getChildByName("3");this.line_left.active=!0,this.line_left.x=o.x,this.line_left.y=o.y,this.finger.active=!0;var i=o.getPosition().clone(),n=new cc.Vec2(this.lvlConf.solution[3].posX,this.lvlConf.solution[3].posY),a=new cc.Vec2((this.lvlConf.solution[3].posX-o.x)/2-200,(this.lvlConf.solution[3].posY-o.y)/3);this.finger.setPosition(i);this.schedule(function(){t.finger.setPosition(i),t.finger.runAction(cc.bezierTo(.5,[i,a,n]))},1,cc.macro.REPEAT_FOREVER,0),o&&this.addItemListener(o,function(){t.setSelectFramePos(),t.updateProgress(),o.color=new cc.Color(255,255,255),o.off(cc.Node.EventType.TOUCH_START),o.off(cc.Node.EventType.TOUCH_MOVE),o.off(cc.Node.EventType.TOUCH_CANCEL),o.off(cc.Node.EventType.TOUCH_END),t.selected=null,o.runAction(cc.moveTo(.2,t.lvlConf.solution[3].posX,t.lvlConf.solution[3].posY)),t.schedule(function(){t.line_left.active=!1,t.finger.stopAllActions(),t.unscheduleAllCallbacks();var e=t.container.getChildByName("1");e&&t.addItemListener(e),t.line_right.active=!0,t.line_right.x=e.x,t.line_right.y=e.y;var o=e.getPosition().clone(),i=new cc.Vec2(t.lvlConf.solution[1].posX,t.lvlConf.solution[1].posY),n=new cc.Vec2((t.lvlConf.solution[1].posX-e.x)/2+300,(t.lvlConf.solution[1].posY-e.y)/3);t.finger.setPosition(o);t.schedule(function(){t.finger.setPosition(o),t.finger.runAction(cc.bezierTo(.5,[o,n,i]))},1,cc.macro.REPEAT_FOREVER,0)},.2,0)});break;case 5:this.mask1.active=!0;var s=this.container.getChildByName("3");this.line_left2.active=!0,this.line_left2.x=s.x,this.line_left2.y=s.y,this.finger.active=!0;var c=s.getPosition().clone(),r=new cc.Vec2(this.lvlConf.solution[3].posX,this.lvlConf.solution[3].posY),l=new cc.Vec2((this.lvlConf.solution[3].posX-s.x)/2-300,(this.lvlConf.solution[3].posY-s.y)/3);this.finger.setPosition(c);this.schedule(function(){t.finger.setPosition(c),t.finger.runAction(cc.bezierTo(.5,[c,l,r]))},1,cc.macro.REPEAT_FOREVER,0),s&&this.addItemListener(s,function(){t.setSelectFramePos(),t.updateProgress(),s.color=new cc.Color(255,255,255),s.off(cc.Node.EventType.TOUCH_START),s.off(cc.Node.EventType.TOUCH_MOVE),s.off(cc.Node.EventType.TOUCH_CANCEL),s.off(cc.Node.EventType.TOUCH_END),t.selected=null,s.runAction(cc.moveTo(.2,t.lvlConf.solution[3].posX,t.lvlConf.solution[3].posY)),t.schedule(function(){t.line_left2.active=!1,t.finger.stopAllActions(),t.unscheduleAllCallbacks();var e=t.container.getChildByName("1");t.line_right2.active=!0,t.line_right2.x=e.x,t.line_right2.y=e.y;var o=e.getPosition().clone(),i=new cc.Vec2(t.lvlConf.solution[1].posX,t.lvlConf.solution[1].posY),n=new cc.Vec2((t.lvlConf.solution[1].posX-e.x)/2+300,(t.lvlConf.solution[1].posY-e.y)/3);t.finger.setPosition(o);t.schedule(function(){t.finger.setPosition(o),t.finger.runAction(cc.bezierTo(.5,[o,n,i]))},1,cc.macro.REPEAT_FOREVER,0),e&&t.addItemListener(e,function(){t.setSelectFramePos(),t.updateProgress(),e.runAction(cc.moveTo(.2,t.lvlConf.solution[1].posX,t.lvlConf.solution[1].posY)),t.schedule(function(){t.mask1.active=!1,t.mask2.active=!0,t.line_right2.active=!1,t.finger.stopAllActions(),t.unscheduleAllCallbacks(),t.line_rotate.active=!0,t.line_rotate.x=e.x,t.line_rotate.y=e.y;var o=new cc.Vec2(e.x+150,e.y+50),i=new cc.Vec2(e.x+120,e.y-120),n=new cc.Vec2(e.x-50,e.y-150);t.finger.setPosition(o);t.schedule(function(){t.finger.setPosition(o),t.finger.runAction(cc.bezierTo(.5,[o,i,n]))},1,cc.macro.REPEAT_FOREVER,0)},.2,0)})},.2,0)})}},t.prototype.loadStage=function(e,t,i){var c=this;void 0===i&&(i=!1);var r=i?"preload":"load",u=i?"_preload":"",d=n.TutorialLvl.indexOf(e)>=0;if(this.reset(),!i&&this.level_preload==e&&this.resCnt_preload>=2)return console.log("show preload",this.lvlConf_preload),this.lvlConf=this.lvlConf_preload,this.lvlConf_preload=null,this.title.getComponent(cc.Label).string=this.lvlConf.title,this.title.active=!0,this.title.scale=2.5,this.title.runAction(cc.sequence(cc.scaleTo(.2,.9),cc.scaleTo(.05,1.05),cc.scaleTo(.05,1))),this.tipsFrame=this.tipsFrame_preload,this.tipsFrame_preload=null,this.tips.getComponent(cc.Sprite).spriteFrame=this.tipsFrame.clone(),!this.overScript&&(this.overScript=this.OverView.getComponent(s.default)),this.overScript.setFrame(this.tipsFrame),this.items=this.items_preload,this.items_preload=null,this.itemsFrame=this.itemsFrame_preload,this.itemsFrame_preload=null,Object.keys(this.items).forEach(function(e){c.container.addChild(c.items[e])}),this.winStep=this.winStep_preload,d&&this.showTutorial(e),this.level_preload=e+1,this.loadTimeStamp_preload=Date.now(),void this.loadStage(this.level_preload,this.loadTimeStamp_preload,!0);!i&&l.default.showLoading&&l.default.showLoading({title:"\u52a0\u8f7d\u4e2d"}),console.log(r+" start. level: ",e),this["resCnt"+u]=0,cc.loader.load(o.BaseUrl+"question/level"+e+"/config.json",function(n,f){if(n&&(console.error(r+" conf error:",n),!i))return l.default.hideLoading&&l.default.hideLoading(),void c.showNetErr();if(t===c["loadTimeStamp"+u]){c["lvlConf"+u]=f,console.log(">>> ["+r+"] conf: ",c["lvlConf"+u]),i||(c.title.getComponent(cc.Label).string=c.lvlConf.title,c.title.active=!0,c.title.scale=2.5,c.title.runAction(cc.sequence(cc.scaleTo(.2,.9),cc.scaleTo(.05,1.05),cc.scaleTo(.05,1)))),c["items"+u]={},c["itemsFrame"+u]={},!c.lvlSelectScript&&(c.lvlSelectScript=c.LvlSelectView.getComponent(a.default)),cc.loader.load(o.BaseUrl+"solution/"+c.lvlSelectScript.titleJson[e]+".png",function(o,n){if(o&&(console.error(r+" solution error:",c.lvlSelectScript.titleJson[e],o),!i))return l.default.hideLoading&&l.default.hideLoading(),void c.showNetErr();t===c["loadTimeStamp"+u]&&(c["resCnt"+u]++,console.log(r+" solution done. level: "+e+" loadedCnt: "+c["resCnt"+u]+"/2"),c["tipsFrame"+u]=new cc.SpriteFrame(n),i||(c.tips.getComponent(cc.Sprite).spriteFrame=c.tipsFrame.clone(),!c.overScript&&(c.overScript=c.OverView.getComponent(s.default)),c.overScript.setFrame(c.tipsFrame)))});var h=[],p=[];Object.keys(c["lvlConf"+u].question).forEach(function(t){p.push(t),h.push(o.BaseUrl+"question/level"+e+"/"+t+".png")}),console.log(">>> ["+r+"] urls:",h),cc.loader.load(h,function(o,n){if(o&&(console.error(r+" question error:",e,o),!i))return l.default.hideLoading&&l.default.hideLoading(),void c.showNetErr();if(t===c["loadTimeStamp"+u]){!i&&l.default.hideLoading&&l.default.hideLoading(),c["resCnt"+u]++,console.log(r+" question done. level: "+e+" loadedCnt: "+c["resCnt"+u]+"/2"),h.forEach(function(e,t){var o=n.getContent(e),a=new cc.Node(p[t]);a.addComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o),c["items"+u][p[t]]=a,c["itemsFrame"+u][p[t]]="question",a.x=c["lvlConf"+u].question[p[t]].posX,a.y=c["lvlConf"+u].question[p[t]].posY,a.rotation=(c["lvlConf"+u].question[p[t]].rot+360)%360,a.zIndex=c["lvlConf"+u].question[p[t]].zIndex,!d&&c.addItemListener(a),!i&&c.container.addChild(a)});var a=Object.keys(c["lvlConf"+u].solution).length;c["winStep"+u]=.9/(a*a),!i&&d&&c.showTutorial(e),i||(c.level_preload=e+1,c.loadTimeStamp_preload=Date.now(),c.loadStage(c.level_preload,c.loadTimeStamp_preload,!0))}})}})},t.prototype.clearStage=function(){console.log("clearStage"),this.title.active=!1,this.container.removeAllChildren()},t.prototype.addItemListener=function(e,t){var o=this;e.on(cc.Node.EventType.TOUCH_START,function(t){t.stopPropagation(),null==o.touchID&&(o.touchID=t.getID()),o.touchID==t.getID()&&o.canTouch&&(o.selected&&(o.items[o.selected].color=new cc.Color(255,255,255)),o.selected=e.name,e.color=new cc.Color(180,180,180),o.prevPos=t.target.parent.convertToNodeSpaceAR(t.getLocation()).clone(),o.posBeforeMove=e.getPosition().clone())}),e.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(t.stopPropagation(),o.touchID==t.getID()&&o.canTouch){var i=t.target.parent.convertToNodeSpaceAR(t.getLocation());e.x+=i.x-o.prevPos.x,e.y+=i.y-o.prevPos.y,o.prevPos.x=i.x,o.prevPos.y=i.y,o.setSelectFramePos(),o.updateProgress()}}),e.on(cc.Node.EventType.TOUCH_END,function(i){i.stopPropagation(),o.touchID==i.getID()&&(o.touchID=null,o.canTouch&&(o.selected=e.name,o.itemsFrame[o.selected]?(t&&"solution"==o.itemsFrame[o.selected]&&t(),r.default.instance.play("move"),!o.btn_restart.active&&(o.btn_restart.active=!0),o.updateProgress(),o.winCheck()):(r.default.instance.play("close"),e.runAction(cc.moveTo(.2,o.posBeforeMove)),o.schedule(function(){o.setSelectFramePos(),o.updateProgress()},.2,0)),o.prevProgress=o.winBar.progress))}),e.on(cc.Node.EventType.TOUCH_CANCEL,function(i){i.stopPropagation(),o.touchID==i.getID()&&(o.touchID=null,o.canTouch&&(o.selected=e.name,o.itemsFrame[o.selected]?(r.default.instance.play("move"),t&&"solution"==o.itemsFrame[o.selected]&&t(),!o.btn_restart.active&&(o.btn_restart.active=!0),o.updateProgress(),o.winCheck()):(r.default.instance.play("close"),e.runAction(cc.moveTo(.2,o.posBeforeMove)),o.schedule(function(){o.setSelectFramePos(),o.updateProgress()},.2,0)),o.prevProgress=o.winBar.progress))})},t.prototype.addRotListener=function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(t){if(t.stopPropagation(),null==e.touchID&&(e.touchID=t.getID()),e.touchID==t.getID()&&e.canTouch&&e.selected&&e.items[e.selected]){var o=t.target.parent.convertToNodeSpaceAR(t.getLocation()),i=o.x-e.items[e.selected].x,n=o.y-e.items[e.selected].y;e.prevRot=Math.atan2(i,n)/Math.PI*180}}),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(t.stopPropagation(),e.touchID==t.getID()&&e.canTouch&&e.selected&&e.items[e.selected]){var o=t.target.parent.convertToNodeSpaceAR(t.getLocation()),i=o.x-e.items[e.selected].x,n=o.y-e.items[e.selected].y,a=Math.atan2(i,n)/Math.PI*180,s=a-e.prevRot;s>180&&(s-=360),s<-180&&(s+=360),e.items[e.selected].rotation+=s,e.items[e.selected].rotation=e.items[e.selected].rotation%360,e.prevRot=a,e.updateProgress()}}),this.node.on(cc.Node.EventType.TOUCH_END,function(t){t.stopPropagation(),e.touchID==t.getID()&&(e.touchID=null,e.canTouch&&e.selected&&e.items[e.selected]&&e.winCheck())}),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(t){t.stopPropagation(),e.touchID==t.getID()&&(e.touchID=null,e.canTouch&&e.selected&&e.items[e.selected]&&e.winCheck())})},t.prototype.addBtnListener=function(){var e=this;this.btn_back.on(cc.Node.EventType.TOUCH_START,function(t){t.stopPropagation(),null==e.touchID&&(e.touchID=t.getID()),e.touchID==t.getID()&&(e.btn_back.color=new cc.Color(180,180,180))}),this.btn_back.on(cc.Node.EventType.TOUCH_CANCEL,function(t){t.stopPropagation(),e.touchID==t.getID()&&(e.touchID=null,e.btn_back.color=new cc.Color(255,255,255))}),this.btn_back.on(cc.Node.EventType.TOUCH_END,function(t){t.stopPropagation(),e.touchID==t.getID()&&(e.touchID=null,e.btn_back.color=new cc.Color(255,255,255),r.default.instance.play("button"),e.clearStage(),e.hideTutorial(),e.node.active=!1,e.LvlSelectView.active=!0)}),this.btn_restart.on(cc.Node.EventType.TOUCH_START,function(t){t.stopPropagation(),null==e.touchID&&(e.touchID=t.getID()),e.touchID==t.getID()&&(e.btn_restart.color=new cc.Color(180,180,180))}),this.btn_restart.on(cc.Node.EventType.TOUCH_CANCEL,function(t){t.stopPropagation(),e.touchID==t.getID()&&(e.touchID=null,e.btn_restart.color=new cc.Color(255,255,255))}),this.btn_restart.on(cc.Node.EventType.TOUCH_END,function(t){t.stopPropagation(),e.touchID==t.getID()&&(e.touchID=null,e.btn_restart.color=new cc.Color(255,255,255),r.default.instance.play("button"),e.restartGame())}),this.btn_hint.on(cc.Node.EventType.TOUCH_START,function(t){if(t.stopPropagation(),null==e.touchID&&(e.touchID=t.getID()),e.touchID==t.getID()){var o=function(){r.default.instance.play("hint"),e.btn_hint.active=!1,e.tips.active=!0};1==i.default.config.game_hint&&e.canTouch&&(f.default.instance.isOverVideo()?f.default.instance.share({pos:"game_hint",success:function(){o()}}):(e.canTouch=!1,f.default.instance.video({pos:"game_hint",success:function(){o()},fail:function(){f.default.instance.share({pos:"game_hint",success:function(){o()}})},complete:function(){e.canTouch=!0}}))),2==i.default.config.game_hint&&f.default.instance.share({pos:"game_hint",success:function(){o()}})}}),this.btn_hint.on(cc.Node.EventType.TOUCH_CANCEL,function(t){t.stopPropagation(),e.touchID==t.getID()&&(e.touchID=null)}),this.btn_hint.on(cc.Node.EventType.TOUCH_END,function(t){t.stopPropagation(),e.touchID==t.getID()&&(e.touchID=null)})},t.prototype.setSelectFramePos=function(){var e=this.frame_question.parent.convertToNodeSpace(this.items[this.selected].getPosition()),t=this.frame_solution.parent.convertToNodeSpace(this.items[this.selected].getPosition());Math.abs(t.x-this.frame_solution.x)<this.frame_solution.width/2-Math.min(this.items[this.selected].width,this.items[this.selected].height,.15*this.frame_solution.height)/2&&Math.abs(t.y-this.frame_solution.y)<this.frame_solution.height/2-Math.min(this.items[this.selected].width,this.items[this.selected].height,.15*this.frame_solution.height)/2?this.itemsFrame[this.selected]="solution":Math.abs(e.x-this.frame_question.x)<this.frame_question.width/2-Math.min(this.items[this.selected].width,this.items[this.selected].height,.15*this.frame_question.height)/2&&Math.abs(e.y-this.frame_question.y)<this.frame_question.height/2-Math.min(this.items[this.selected].width,this.items[this.selected].height,.15*this.frame_question.height)/2?this.itemsFrame[this.selected]="question":this.itemsFrame[this.selected]=null},t.prototype.updateProgress=function(){var e=this,t=0;this.winFlag=!0;var o={};Object.keys(this.itemsFrame).forEach(function(i){"solution"==e.itemsFrame[i]?e.lvlConf.solution[i]?(t+=e.winStep,Object.keys(o).forEach(function(o){var n=e.lvlConf.solution[i].rot,a=e.lvlConf.solution[o].rot;if(null==n){var s=e.checkTwoItems(o,i);t+=e.winStep*s,s<2&&(e.winFlag=!1)}else if(null==a){s=e.checkTwoItems(i,o);t+=e.winStep*s,s<2&&(e.winFlag=!1)}else{s=Math.min(e.checkTwoItems(o,i),e.checkTwoItems(i,o));t+=e.winStep*s,s<2&&(e.winFlag=!1)}}),o[i]=e.items[i]):(t-=2*e.winStep,e.winFlag=!1):e.lvlConf.solution[i]&&(e.winFlag=!1)}),t>=1&&(t=.9),t<0&&(t=0),this.winBar.progress=this.winFlag?1:t,this.completeIcon.active=1==this.winBar.progress},t.prototype.checkTwoItems=function(e,t){var o=0,i=this.lvlConf.solution[e].rot,n=this.lvlConf.solution[t].rot,a=(this.items[t].rotation-this.items[e].rotation+720)%360;if(null==i)o++,this.checkPos(e,t,i)&&o++;else if("number"==typeof i){if(this.checkPos(e,t,i)&&o++,null==n)o++;else if("number"==typeof n)this.checkRot(i,n,a)&&o++;else for(var s=0;s<n.length;s++)if(this.checkRot(i,n[s],a)){o++;break}}else for(var c=!0,r=!0,l=0;(c||r)&&l<i.length;l++)if(c&&this.checkPos(e,t,i[l])&&(c=!1,o++),r)if(null==n)r=!1,o++;else if("number"==typeof n)this.checkRot(i[l],n,a)&&(r=!1,o++);else for(s=0;r&&s<n.length;s++)this.checkRot(i[l],n[s],a)&&(r=!1,o++);return o},t.prototype.checkPos=function(e,t,o){var i,a=this.items[e].convertToWorldSpaceAR(new cc.Vec2(0,0)),s=this.items[t].convertToWorldSpaceAR(new cc.Vec2(0,0)),c=s.x-a.x,r=s.y-a.y,l=this.lvlConf.solution[t].posX-this.lvlConf.solution[e].posX,u=this.lvlConf.solution[t].posY-this.lvlConf.solution[e].posY;if(null==o){var d=Math.sqrt(c*c+r*r),f=Math.sqrt(l*l+u*u);i=Math.abs(d-f)}else{var h=Math.sin(this.items[e].rotation*Math.PI/180),p=Math.cos(this.items[e].rotation*Math.PI/180),v=p*c-h*r,g=h*c+p*r;h=Math.sin(o*Math.PI/180);var m=(p=Math.cos(o*Math.PI/180))*l-h*u,_=h*l+p*u;i=Math.sqrt(Math.pow(v-m,2)+Math.pow(g-_,2))}return i<n.WinDeltaDist},t.prototype.checkRot=function(e,t,o){var i=Math.abs(o-(t-e+720)%360);return(i=Math.min(i,Math.abs(i-360)))<n.WinDeltaAngle},t.prototype.winCheck=function(){var e=this;if(!this.isWin&&this.winBar.progress>=1){this.canTouch=!1,Object.keys(this.lvlConf.solution).forEach(function(t){console.log(t,e.items[t].getPosition(),e.lvlConf.solution[t].posX,e.lvlConf.solution[t].posY),e.items[t].runAction(cc.moveTo(.2,e.lvlConf.solution[t].posX,e.lvlConf.solution[t].posY)),null!=e.lvlConf.solution[t].rot&&("number"==typeof e.lvlConf.solution[t].rot?e.items[t].runAction(cc.rotateTo(.2,e.lvlConf.solution[t].rot)):e.items[t].runAction(cc.rotateTo(.2,e.lvlConf.solution[t].rot[0])))}),this.selected&&(this.items[this.selected].color=new cc.Color(255,255,255)),this.tips.active=!1,this.btn_hint.active=!1,this.btn_restart.active=!1,this.btn_back.active=!1,this.hideTutorial(),this.isWin=!0,this.level==i.default.gameData.level&&(i.default.gameData.level++,d.default.updateGameData(!0),this.LvlSelectView.getChildByName("scrollView").getComponent(c.default).updateItemsContent()),r.default.instance.play("win"),this.flash.active=!0,this.schedule(function(){e.flash.rotation+=1.5},.03,100);var t=function(){e.clearStage(),e.unschedule(t),e.flash.active=!1,e.OverView.active=!0};this.scheduleOnce(t,2.5),u.default.postGameScore({key:"clearStage",id:Date.now()+"",score:i.default.gameData.level})}},t.prototype.setState=function(e){this.state=e},t.BaseUrl="textures/game/",__decorate([v(cc.Node)],t.prototype,"btn_back",void 0),__decorate([v(cc.Node)],t.prototype,"btn_restart",void 0),__decorate([v(cc.Node)],t.prototype,"btn_hint",void 0),__decorate([v(cc.Node)],t.prototype,"progressBar",void 0),__decorate([v(cc.Node)],t.prototype,"frame_solution",void 0),__decorate([v(cc.Node)],t.prototype,"frame_question",void 0),__decorate([v(cc.Node)],t.prototype,"title",void 0),__decorate([v(cc.Node)],t.prototype,"lvlLabel",void 0),__decorate([v(cc.Node)],t.prototype,"tips",void 0),__decorate([v(cc.Node)],t.prototype,"container",void 0),__decorate([v(cc.Node)],t.prototype,"completeIcon",void 0),__decorate([v(cc.Node)],t.prototype,"flash",void 0),__decorate([v(cc.Node)],t.prototype,"mask1",void 0),__decorate([v(cc.Node)],t.prototype,"mask2",void 0),__decorate([v(cc.Node)],t.prototype,"line_left",void 0),__decorate([v(cc.Node)],t.prototype,"line_right",void 0),__decorate([v(cc.Node)],t.prototype,"line_left2",void 0),__decorate([v(cc.Node)],t.prototype,"line_right2",void 0),__decorate([v(cc.Node)],t.prototype,"line_rotate",void 0),__decorate([v(cc.Node)],t.prototype,"finger",void 0),__decorate([v(cc.Node)],t.prototype,"HomeView",void 0),__decorate([v(cc.Node)],t.prototype,"LvlSelectView",void 0),__decorate([v(cc.Node)],t.prototype,"OverView",void 0),t=o=__decorate([p],t)}(cc.Component);o.default=g,cc._RF.pop()},{"../Const":"Const","../Global":"Global","../SDK/ws":"ws","../SDK/wx":"wx","../component/AudioMgr":"AudioMgr","../component/Loading":"Loading","../component/Reward":"Reward","../component/ScrollViewBetter":"ScrollViewBetter","./LvlSelect":"LvlSelect","./OverView":"OverView"}],Global:[function(e,t,o){"use strict";cc._RF.push(t,"ae81alFN2FAI7vuAEsaiZax","Global"),Object.defineProperty(o,"__esModule",{value:!0});o.default={gameData:{musicEnabled:!0,soundEnabled:!0,vibrationEnabled:!0,updateTimestamp:0,videoCount:0,lastVideoTimestamp:0,shareCount:0,lastShareTimestamp:0,level:1},config:{allow_share:!0,allow_video:!0,share_first:!1,share_number:5,video_number:6,share_time:5,banner_time:180,share_delay:4,online:!0,debug:!1,allow_revive:!0,banner_delay:1,deny_banner:!1,share_fail:"'\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u6362\u4e2a\u7fa4'",distance_iphonex:50,banner_click_time:2,games:{},shares:{},videos:{},banners:{},try_cannon:1,try_ball:1,revive:1,reward_triple:1,bulletRewardType:1,cannonRewardType:4,hasTreasure:!0,banner:"",banner_number:0,show_number:2,game_hint:2,MaxLevel:60,MaxShowLevel:60}},cc._RF.pop()},{}],HomeView:[function(e,t,o){"use strict";cc._RF.push(t,"2e5d528yyhBy7VbEHzRgyCj","HomeView"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../Global"),n=e("./GameView"),a=e("./LvlSelect"),s=e("../component/Loading"),c=e("../component/AudioMgr"),r=cc._decorator,l=r.ccclass,u=r.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_start=null,t.GameView=null,t.LvlSelectView=null,t.initCnt=0,t.hasAddlistener=!1,t}return __extends(t,e),t.prototype.start=function(){var e=this;s.default.initWeixin(function(){console.log("login succeed."),e.initCnt++,e.initCnt>=2&&e.onInitComplete()}),this.lvlSelectScript=this.LvlSelectView.getComponent(a.default),cc.loader.load(n.default.BaseUrl+"solution/title.json",function(t,o){t&&console.error("load title json error:",t),e.lvlSelectScript.titleJson=o,console.log("title json loaded.",e.lvlSelectScript.titleJson),e.initCnt++,e.initCnt>=2&&e.onInitComplete()})},t.prototype.addBtnListener=function(){var e=this;this.btn_start.on(cc.Node.EventType.TOUCH_START,function(t){e.touchTarget&&e.touchTarget!=t.target||(e.touchTarget=t.target,e.btn_start.color=new cc.Color(180,180,180))}),this.btn_start.on(cc.Node.EventType.TOUCH_CANCEL,function(t){e.touchTarget&&e.touchTarget!=t.target||(e.touchTarget=null,e.btn_start.color=new cc.Color(255,255,255))}),this.btn_start.on(cc.Node.EventType.TOUCH_END,function(t){e.touchTarget&&e.touchTarget!=t.target||(e.touchTarget=null,e.btn_start.color=new cc.Color(255,255,255),c.default.instance.play("button"),e.gameScript.startGame(i.default.gameData.level),e.node.active=!1,e.GameView.active=!0)})},t.prototype.onInitComplete=function(){this.gameScript=this.GameView.getComponent(n.default),i.default.gameData.level<=i.default.config.MaxLevel&&(this.gameScript.level_preload=i.default.gameData.level,this.gameScript.loadTimeStamp_preload=Date.now(),this.gameScript.loadStage(this.gameScript.level_preload,this.gameScript.loadTimeStamp_preload,!0)),this.lvlSelectScript.init(),this.addBtnListener()},__decorate([u(cc.Node)],t.prototype,"btn_start",void 0),__decorate([u(cc.Node)],t.prototype,"GameView",void 0),__decorate([u(cc.Node)],t.prototype,"LvlSelectView",void 0),t=__decorate([l],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../Global":"Global","../component/AudioMgr":"AudioMgr","../component/Loading":"Loading","./GameView":"GameView","./LvlSelect":"LvlSelect"}],Loading:[function(e,t,o){"use strict";cc._RF.push(t,"6ec90zt9D9DmZtorSe157QY","Loading"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../Global"),n=e("../Const"),a=e("../SDK/wx"),s=e("../SDK/ws"),c=function(){function e(){this.isGameDataLoaded=!1}return e.prototype.initWeixin=function(e){this.onGameDataLoaded=e,a.default.showShareMenu({withShareTicket:!0}),a.default.onShareAppMessage(function(){var e=s.default.createShareOptions({pos:"ShareAppButton"});return{title:e.title,imageUrl:e.imageUrl,query:e.query}}),s.default.init({host:"ws.lesscool.cn",version:n.VERSION,appid:1141,secret:"8a4b117c17f8134b3bdc5567571339d6",share:{title:"\u5168\u6c11\u6b22\u4e50\uff0c\u5929\u5929\u6e38\u620f\uff01",image:"http://oss.lesscool.cn/fcdh/96d172496dbafa4ab9c8335a7133476c.png"}}),this.loginWs()},e.prototype.loginWs=function(){a.default.showLoading({title:"\u767b\u5f55\u4e2d",mask:!0}),s.default.onLoginComplete(this.onLoginComplete.bind(this)),s.default.login()},e.prototype.onLoginComplete=function(e,t){"success"===s.default.getLoginStatus()?(console.log("login_succeed"),s.default.traceEvent("login_succeed"),a.default.hideLoading(),console.log("ws.conf",s.default.conf),console.log("ws.user",s.default.user),console.log("ws.data",s.default.data),this.loadConfig(),this.loadGameData(t)):"fail"===s.default.getLoginStatus()&&(console.log("login_failed"),s.default.traceEvent("login_failed"),a.default.hideLoading(),a.default.showModal({title:"\u767b\u9646\u5931\u8d25",content:"\u8bf7\u5141\u8bb8\u6388\u6743",confirmText:"\u91cd\u65b0\u767b\u9646",cancelText:"\u5173\u95ed",success:function(e){a.default.showLoading({title:"\u767b\u5f55\u4e2d",mask:!0}),s.default.login()}}))},e.prototype.loadConfig=function(){Object.assign(i.default.config,s.default.conf)},e.prototype.loadGameData=function(e){var t=this;e&&e.updateTimestamp?s.default.data&&s.default.data.updateTimestamp&&s.default.data.updateTimestamp>e.updateTimestamp?s.default.setAllData(s.default.data,!0):s.default.setAllData(e):s.default.data&&s.default.data.updateTimestamp||s.default.setAllData(i.default.gameData,!0),i.default.gameData=Object.assign(i.default.gameData,s.default.data),a.default.onHide(function(){t.updateGameData(!0)}),s.default.onShow(function(e){}),this.isGameDataLoaded=!0,this.onGameDataLoaded&&this.onGameDataLoaded()},e.prototype.updateGameData=function(e){i.default.gameData.updateTimestamp=Date.now(),e&&console.log("updateGameData",i.default.gameData),s.default.setAllData(i.default.gameData,e)},e}();o.default=new c,cc._RF.pop()},{"../Const":"Const","../Global":"Global","../SDK/ws":"ws","../SDK/wx":"wx"}],LvlSelect:[function(e,t,o){"use strict";cc._RF.push(t,"41c24uUuLZNqoczPjwt7/na","LvlSelect"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../Global"),n=e("./GameView"),a=e("../component/ScrollViewBetter"),s=e("../component/AudioMgr"),c=cc._decorator,r=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.HomeView=null,t.GameView=null,t.btn_back=null,t.scrollView=null,t.content=null,t.lvlLabel=null,t.cellsPerRow=3,t.itemWidth=210,t.itemHeight=300,t.spacingX=1.14,t.spacingY=1.12,t.iconList=[],t.lockList=[],t}return __extends(t,e),t.prototype.onEnable=function(){this.lvlLabel.getComponent(cc.Label).string=(i.default.gameData.level-1).toString()},t.prototype.init=function(){var e=this;if(0==this.iconList.length){this.gameScript=this.GameView.getComponent(n.default),this.lvlLabel.getComponent(cc.Label).string=(i.default.gameData.level-1).toString();cc.loader.loadResArray(["textures/lvlSelect/frame5_0","textures/lvlSelect/crown2","textures/lvlSelect/icon_new","textures/lvlSelect/line","textures/lvlSelect/question","textures/lvlSelect/lock","textures/lvlSelect/zhezhao"],function(t,o){t&&console.error("loadResArray error:",t),console.log(o),e.iconList.push(new cc.SpriteFrame(o[1])),e.iconList.push(new cc.SpriteFrame(o[2])),e.lockList.push(new cc.SpriteFrame(o[4])),e.lockList.push(new cc.SpriteFrame(o[5])),e.scrollView.getComponent(a.default).createItems(Math.ceil(i.default.config.MaxShowLevel/3),function(t,a){for(var s=function(s){var c=3*a+s+1,r=t.getChildByName(s.toString());e.addItemListener(r,c);var l=r.getChildByName("icon"),u=r.getChildByName("lock"),d=r.getChildByName("mask"),f=r.getChildByName("solution");r.getChildByName("label").getComponent(cc.Label).string=c.toString(),c<i.default.gameData.level?(l.active=!0,l.getComponent(cc.Sprite).spriteFrame=e.iconList[0],l.x=-r.width/2+.4*l.width,l.y=r.height/2-.85*l.height,u.active=!1,d.active=!1,f.active=!0,cc.loader.load(n.default.BaseUrl+"solution/"+e.titleJson[c]+".png",function(e,t){f.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t),f.scale=.48})):c==i.default.gameData.level&&c<=i.default.config.MaxLevel?(l.active=!0,l.getComponent(cc.Sprite).spriteFrame=e.iconList[1],l.x=-r.width/2+.4*l.width,l.y=r.height/2-.85*l.height,u.active=!0,u.getComponent(cc.Sprite).spriteFrame=e.lockList[0],d.active=!1,f.active=!1):(l.active=!1,u.active=!0,u.getComponent(cc.Sprite).spriteFrame=e.lockList[1],d.active=!0,d.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(o[6]),f.active=!1)},c=0;c<3;c++)s(c)},0)}),this.addBtnListener()}},t.prototype.addItemListener=function(e,t){var o=this;e.targetOff(e),e.on(cc.Node.EventType.TOUCH_START,function(t){e.color=new cc.Color(180,180,180)},e),e.on(cc.Node.EventType.TOUCH_MOVE,function(t){e.color=new cc.Color(255,255,255)},e),e.on(cc.Node.EventType.TOUCH_END,function(n){console.log("click level",t),s.default.instance.play("button"),e.color=new cc.Color(255,255,255),t<=i.default.gameData.level&&(o.gameScript.startGame(t),o.node.active=!1,o.GameView.active=!0)},e)},t.prototype.addBtnListener=function(){var e=this;this.btn_back.on(cc.Node.EventType.TOUCH_START,function(){e.btn_back.opacity=180}),this.btn_back.on(cc.Node.EventType.TOUCH_CANCEL,function(){e.btn_back.opacity=255}),this.btn_back.on(cc.Node.EventType.TOUCH_END,function(){e.btn_back.opacity=255,e.node.active=!1,e.HomeView.active=!0,s.default.instance.play("button")})},__decorate([l(cc.Node)],t.prototype,"HomeView",void 0),__decorate([l(cc.Node)],t.prototype,"GameView",void 0),__decorate([l(cc.Node)],t.prototype,"btn_back",void 0),__decorate([l(cc.Node)],t.prototype,"scrollView",void 0),__decorate([l(cc.Node)],t.prototype,"content",void 0),__decorate([l(cc.Node)],t.prototype,"lvlLabel",void 0),__decorate([l],t.prototype,"cellsPerRow",void 0),__decorate([l],t.prototype,"itemWidth",void 0),__decorate([l],t.prototype,"itemHeight",void 0),__decorate([l],t.prototype,"spacingX",void 0),__decorate([l],t.prototype,"spacingY",void 0),t=__decorate([r],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../Global":"Global","../component/AudioMgr":"AudioMgr","../component/ScrollViewBetter":"ScrollViewBetter","./GameView":"GameView"}],OverView:[function(e,t,o){"use strict";cc._RF.push(t,"bede3ouYsFK26zPwWczAa72","OverView"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../Global"),n=e("./GameView"),a=e("../component/AudioMgr"),s=cc._decorator,c=s.ccclass,r=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.HomeView=null,t.GameView=null,t.LvlSelectView=null,t.btn_back=null,t.btn_next=null,t.lvlLabel=null,t.tips=null,t.title=null,t.titleBg=null,t.center=null,t.left=null,t.right=null,t.crown=null,t.leftLeaf=null,t.rightLeaf=null,t.label=null,t}return __extends(t,e),t.prototype.start=function(){this.gameScript=this.GameView.getComponent(n.default),this.addBtnListener()},t.prototype.onEnable=function(){this.lvlLabel.getComponent(cc.Label).string=(i.default.gameData.level-1).toString(),a.default.instance.closeAll(),this.btn_next.active=!1,this.btn_back.active=!1,this.title.active=!1,this.titleBg.active=!1,this.tips.active=!0,this.tips.scale=1,this.tips.runAction(cc.sequence(cc.scaleTo(.1,1.2),cc.scaleTo(.2,.85))),this.schedule(this.playEff,.4,0)},t.prototype.playEff=function(){var e=this;this.schedule(function(){return a.default.instance.play("starin")},.1,0),this.title.active=!0,this.center.scaleX=0,this.center.runAction(cc.sequence(cc.scaleTo(.2,1.2),cc.scaleTo(.05,1))),this.label.scaleX=0,this.label.runAction(cc.sequence(cc.scaleTo(.2,1.2),cc.scaleTo(.05,1))),this.left.x=0,this.left.runAction(cc.sequence(cc.moveTo(.25,-170,-37.5),cc.moveTo(.1,-150,-37.5),cc.moveTo(.1,-162,-37.5))),this.right.x=0,this.right.runAction(cc.sequence(cc.moveTo(.25,170,-41),cc.moveTo(.1,150,-41),cc.moveTo(.1,160,-41))),this.crown.active=!1,this.leftLeaf.active=!1,this.rightLeaf.active=!1,this.schedule(function(){e.titleBg.active=!0,e.crown.active=!0,e.crown.y=40,e.crown.runAction(cc.sequence(cc.moveTo(.1,0,110),cc.moveTo(.05,0,105),cc.moveTo(.15,0,70),cc.moveTo(.05,0,85),cc.moveTo(.05,0,80))),e.crown.scale=.6,e.crown.runAction(cc.sequence(cc.scaleTo(.2,1),cc.scaleTo(.05,.95))),e.schedule(function(){e.crown.rotation=-5,e.crown.runAction(cc.sequence(cc.rotateTo(.15,5),cc.rotateTo(.05,-2),cc.rotateTo(.05,0)))},0,0,.15),e.schedule(function(){e.leftLeaf.active=!0,e.leftLeaf.scale=.6,e.leftLeaf.runAction(cc.sequence(cc.scaleTo(.2,1.1),cc.scaleTo(.05,1))),e.leftLeaf.x=-50,e.leftLeaf.y=40,e.leftLeaf.runAction(cc.sequence(cc.moveTo(.1,-80,80),cc.moveTo(.05,-85,74))),e.rightLeaf.active=!0,e.rightLeaf.scale=.6,e.rightLeaf.runAction(cc.sequence(cc.scaleTo(.2,1.1),cc.scaleTo(.05,1))),e.rightLeaf.x=50,e.rightLeaf.y=40,e.rightLeaf.runAction(cc.sequence(cc.moveTo(.1,78,80),cc.moveTo(.05,82,73))),e.schedule(function(){e.btn_next.active=!0,e.btn_back.active=!0},0,0,.8)},0,0,.3)},0,0,.3)},t.prototype.setFrame=function(e){this.tips.getComponent(cc.Sprite).spriteFrame=e.clone(),this.tips.scale=.85},t.prototype.addBtnListener=function(){var e=this;this.btn_next.on(cc.Node.EventType.TOUCH_START,function(t){e.touchTarget&&e.touchTarget!=t.target||(e.touchTarget=t.target,e.btn_next.color=new cc.Color(180,180,180))}),this.btn_next.on(cc.Node.EventType.TOUCH_CANCEL,function(t){e.touchTarget&&e.touchTarget!=t.target||(e.touchTarget=null,e.btn_next.color=new cc.Color(255,255,255))}),this.btn_next.on(cc.Node.EventType.TOUCH_END,function(t){e.touchTarget&&e.touchTarget!=t.target||(e.touchTarget=null,e.btn_next.color=new cc.Color(255,255,255),a.default.instance.play("button"),e.gameScript.nextGame(),e.node.active=!1,e.btn_next.active=!1,e.btn_back.active=!1)}),this.btn_back.on(cc.Node.EventType.TOUCH_START,function(t){e.touchTarget&&e.touchTarget!=t.target||(e.touchTarget=t.target,e.btn_back.color=new cc.Color(180,180,180))}),this.btn_back.on(cc.Node.EventType.TOUCH_CANCEL,function(t){e.touchTarget&&e.touchTarget!=t.target||(e.touchTarget=null,e.btn_back.color=new cc.Color(255,255,255))}),this.btn_back.on(cc.Node.EventType.TOUCH_END,function(t){e.touchTarget&&e.touchTarget!=t.target||(e.touchTarget=null,e.btn_back.color=new cc.Color(255,255,255),a.default.instance.play("button"),e.node.active=!1,e.GameView.active=!1,e.btn_next.active=!1,e.btn_back.active=!1,e.LvlSelectView.active=!0,e.unscheduleAllCallbacks())})},__decorate([r(cc.Node)],t.prototype,"HomeView",void 0),__decorate([r(cc.Node)],t.prototype,"GameView",void 0),__decorate([r(cc.Node)],t.prototype,"LvlSelectView",void 0),__decorate([r(cc.Node)],t.prototype,"btn_back",void 0),__decorate([r(cc.Node)],t.prototype,"btn_next",void 0),__decorate([r(cc.Node)],t.prototype,"lvlLabel",void 0),__decorate([r(cc.Node)],t.prototype,"tips",void 0),__decorate([r(cc.Node)],t.prototype,"title",void 0),__decorate([r(cc.Node)],t.prototype,"titleBg",void 0),__decorate([r(cc.Node)],t.prototype,"center",void 0),__decorate([r(cc.Node)],t.prototype,"left",void 0),__decorate([r(cc.Node)],t.prototype,"right",void 0),__decorate([r(cc.Node)],t.prototype,"crown",void 0),__decorate([r(cc.Node)],t.prototype,"leftLeaf",void 0),__decorate([r(cc.Node)],t.prototype,"rightLeaf",void 0),__decorate([r(cc.Node)],t.prototype,"label",void 0),t=__decorate([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../Global":"Global","../component/AudioMgr":"AudioMgr","./GameView":"GameView"}],Reward:[function(e,t,o){"use strict";cc._RF.push(t,"77fa4AdN4dBL56YquQRgehn","Reward"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("../SDK/wx"),n=e("../SDK/ws"),a=e("./Ad"),s=e("../Global"),c=cc._decorator,r=c.ccclass,l=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shareTimestampMap={},t.lastShareTimestamp=0,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){var e=this;!o.instance&&(o.instance=this),i.default.onShow(function(t){var o=e.shareArgs;if(o&&o.length){var n=o[0]||{},a=n.pos,c=n.success,r=n.fail,l=n.complete;try{var u=Date.now();c||r?s.default.config.share_delay<=.1||u-e.lastShareTimestamp>1e3*(s.default.config.share_delay||5)?(s.default.gameData.shareCount++,s.default.gameData.lastShareTimestamp=u,e.shareTimestampMap[a]=u,c&&c(t),l&&l(t)):(e.shareTimestampMap[a]=0,i.default.showModal({title:"\u63d0\u793a",content:s.default.config.share_fail,cancelText:"\u77e5\u9053\u4e86",confirmText:"\u91cd\u65b0\u53d1\u9001",success:function(i){i.confirm?e.share.apply(e,o):(r&&r(t),l&&l(t))}})):(e.shareTimestampMap[a]=0,l&&l(t))}finally{e.lastShareTimestamp=0,e.shareArgs=null}}})},t.prototype.reward=function(e){var t=e.pos,o=e.query,i=e.success,n=e.fail,a=e.complete;this.isShareState(t)?this.share({pos:t,query:o,success:i,fail:n,complete:a}):this.video({pos:t,success:i,fail:n,complete:a})},t.prototype.share=function(e){var t=e.pos,o=e.query,i=e.success,a=e.fail,c=e.complete;if(!this.isOnline()||!this.allowShare(t))return console.log("share not allowed"),a&&a(),void(c&&c());var r=Date.now(),l=Number(this.shareTimestampMap[t]);if(l&&r-l<1e3*s.default.config.share_time)return console.log("\u8bf7\u7a0d\u7b49\u4e00\u4f1a\u518d\u64cd\u4f5c"),a&&a(),void(c&&c());(i||a)&&(this.shareTimestampMap[t]=r),this.lastShareTimestamp=Date.now(),this.shareArgs=arguments,n.default.share({pos:t,query:o})},t.prototype.video=function(e){var t=e.pos,o=e.success,i=e.fail,n=e.complete;a.posShowVideo(t,function(){console.log("\u4eca\u65e5\u89c6\u9891\u5df2\u770b\u5b8c"),i&&i(),n&&n()},function(e){e&&e.isEnded||void 0===e?(s.default.gameData.videoCount++,s.default.gameData.lastVideoTimestamp=Date.now(),o&&o()):e&&!e.isEnded||i&&i(),n&&n()})},t.prototype.allowShare=function(e){var t=s.default.config[e+"_allow_share"];return"boolean"==typeof t?t:s.default.config.allow_share},t.prototype.allowVideo=function(e){var t=s.default.config[e+"_allow_video"];return"boolean"==typeof t?t:s.default.config.allow_video},t.prototype.isOnline=function(){return s.default.config.online},t.prototype.isShareFirst=function(e){var t=s.default.config[e+"_share_first"];return"boolean"==typeof t?t:s.default.config.share_first},t.prototype.getShareCount=function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime();return(!s.default.gameData.lastShareTimestamp||s.default.gameData.lastShareTimestamp<t)&&(s.default.gameData.shareCount=0),s.default.gameData.shareCount},t.prototype.isOverShare=function(){return s.default.config.share_number&&s.default.config.share_number<=this.getShareCount()},t.prototype.getVideoCount=function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime();return(!s.default.gameData.lastVideoTimestamp||s.default.gameData.lastVideoTimestamp<t)&&(s.default.gameData.videoCount=0),s.default.gameData.videoCount},t.prototype.isOverVideo=function(){return s.default.config.video_number&&s.default.config.video_number<=this.getVideoCount()},t.prototype.hasVideo=function(){return a.hasVideoAd()},t.prototype.isShareState=function(e){return!(!this.isOnline()||!this.allowShare(e))&&(!this.allowVideo(e)||!this.hasVideo()||(this.isShareFirst(e)&&!this.isOverShare()||this.isOverVideo()))},t=o=__decorate([r],t)}(cc.Component));o.default=l,cc._RF.pop()},{"../Global":"Global","../SDK/ws":"ws","../SDK/wx":"wx","./Ad":"Ad"}],ScrollViewBetter:[function(e,t,o){"use strict";cc._RF.push(t,"7837e+yGXVLAZgbsUsvwxKH","ScrollViewBetter"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,a=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemPrefab=null,t.contentNode=null,t.viewNode=null,t.spacing=0,t.firstPadding=0,t.lastPadding=0,t.vertical=!0,t.topToBottom=!0,t.leftToRight=!0,t}return __extends(t,e),t.prototype.createItems=function(e,t,o){var i=this;void 0===o&&(o=0),this.itemHeight=this.itemPrefab.data.height,this.itemWidth=this.itemPrefab.data.width,this.initItemCallback=t,this.itemListSize=e,this.contentNode.removeAllChildren(),this.vertical?(this.contentNode.height=this.firstPadding+this.itemListSize*(this.itemHeight+this.spacing)+this.lastPadding,this.contentNode.width=this.itemListSize*this.itemWidth,this.innerItemCount=Math.floor(this.viewNode.height/(this.itemHeight+this.spacing))+2):(this.contentNode.height=this.itemListSize*this.itemHeight,this.contentNode.width=this.firstPadding+this.itemListSize*(this.itemWidth+this.spacing)+this.lastPadding,this.innerItemCount=Math.floor(this.viewNode.width/(this.itemWidth+this.spacing))+2),this.outerItemCount=2*Math.floor(this.innerItemCount/2),this.totalItemCount=this.innerItemCount+this.outerItemCount,o>=e&&(o=e-1),o<0&&(o=0),this.startItemIndex=o,this.firstItemIndex=o-this.outerItemCount/2,this.vertical?this.topToBottom?this.contentNode.y=this.viewNode.height/2-this.contentNode.height/2+o*(this.itemHeight+this.spacing):this.contentNode.y=-(this.viewNode.height/2-this.contentNode.height/2+o*(this.itemHeight+this.spacing)):this.leftToRight?this.contentNode.x=-(this.viewNode.width/2-this.contentNode.width/2+o*(this.itemWidth+this.spacing)):this.contentNode.x=this.viewNode.width/2-this.contentNode.width/2+o*(this.itemWidth+this.spacing);var n=this.viewNode.convertToWorldSpaceAR(cc.v2(0,0));this.topLimitPosY=n.y+this.totalItemCount*(this.itemHeight+this.spacing)/2,this.bottomLimitPosY=n.y-this.totalItemCount*(this.itemHeight+this.spacing)/2,this.leftLimitPosX=n.x-this.totalItemCount*(this.itemWidth+this.spacing)/2,this.rightLimitPosX=n.x+this.totalItemCount*(this.itemWidth+this.spacing)/2,this.itemNodeList=[];for(var a=this.firstItemIndex;a<this.totalItemCount+this.firstItemIndex;a++){var s=cc.instantiate(this.itemPrefab);s.parent=this.contentNode,this.setItem(s,a),this.itemNodeList.push(s)}this.node.off("scrolling"),this.node.on("scrolling",function(){i.updateItemsPos()})},t.prototype.setItem=function(e,t){this.vertical?this.topToBottom?e.y=this.contentNode.height/2-(this.firstPadding+t*(this.itemHeight+this.spacing)+this.itemHeight/2):e.y=-(this.contentNode.height/2-(this.firstPadding+t*(this.itemHeight+this.spacing)+this.itemHeight/2)):this.leftToRight?e.x=-(this.contentNode.width/2-(this.firstPadding+t*(this.itemWidth+this.spacing)+this.itemWidth/2)):e.x=this.contentNode.width/2-(this.firstPadding+t*(this.itemWidth+this.spacing)+this.itemWidth/2),t<0||t>=this.itemListSize?e.active=!1:(e.active=!0,this.initItemCallback(e,t))},t.prototype.updateItemsContent=function(){var e=this;this.itemNodeList.forEach(function(t,o){t.active&&e.initItemCallback(t,o+e.firstItemIndex)})},t.prototype.updateItemsPos=function(){if(this.itemNodeList&&this.itemNodeList.length){var e=this.itemNodeList[0],t=this.itemNodeList[this.itemNodeList.length-1],o=e.convertToWorldSpaceAR(cc.v2(0,0)),i=t.convertToWorldSpaceAR(cc.v2(0,0)),n=!1,a=!1;if(this.vertical?this.topToBottom?(n=o.y>this.topLimitPosY,a=i.y<this.bottomLimitPosY):(n=o.y<this.bottomLimitPosY,a=i.y>this.topLimitPosY):this.leftToRight?(n=o.x<this.leftLimitPosX,a=i.x>this.rightLimitPosX):(n=o.x>this.rightLimitPosX,a=i.x<this.leftLimitPosX),n){this.setItem(e,this.firstItemIndex+this.totalItemCount),this.firstItemIndex++;var s=this.itemNodeList.shift();this.itemNodeList.push(s)}else if(a){this.setItem(t,this.firstItemIndex-1),this.firstItemIndex--;s=this.itemNodeList.pop();this.itemNodeList.unshift(s)}}},__decorate([a(cc.Prefab)],t.prototype,"itemPrefab",void 0),__decorate([a(cc.Node)],t.prototype,"contentNode",void 0),__decorate([a(cc.Node)],t.prototype,"viewNode",void 0),__decorate([a],t.prototype,"spacing",void 0),__decorate([a],t.prototype,"firstPadding",void 0),__decorate([a],t.prototype,"lastPadding",void 0),__decorate([a],t.prototype,"vertical",void 0),__decorate([a],t.prototype,"topToBottom",void 0),__decorate([a],t.prototype,"leftToRight",void 0),t=__decorate([n],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],inspector:[function(e,t,o){"use strict";cc._RF.push(t,"6027eiPgQFPMqsnYDf7Kl65","inspector");var i=e("CCInspectorPluginMsg"),n={log:function(){1===arguments.length||2===arguments.length||arguments.length},initInspector:function(){window.inspectorGameMemoryStorage=window.inspectorGameMemoryStorage||{},this.onWebSocketInit()},_collectNodeInfo:function(e){if(e){var t=this._getNodeComponentsInfo(e);return{name:e.name,active:e.active,uuid:e.uuid,type:e.constructor.name,x:e.x,y:e.y,zIndex:e.zIndex,childrenCount:e.childrenCount,children:[],width:e.width,height:e.height,color:{r:e.color.r,g:e.color.g,b:e.color.b,a:e.color.a},opacity:e.opacity,rotation:e.rotation,rotationX:e.rotationX,rotationY:e.rotationY,anchorX:e.anchorX,anchorY:e.anchorY,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,components:t}}return null},getNodeInfo:function(e){var t=window.inspectorGameMemoryStorage[e];return t?this._collectNodeInfo(t):null},_getNodeComponentsInfo:function(e){for(var t=[],o=e._components,i=0;i<o.length;i++){var n=o[i];window.inspectorGameMemoryStorage[n.uuid]=n,t.push({uuid:n.uuid,type:n.constructor.name,name:cc.js.getClassName(n)})}return t},_collectChildrenInfo:function(e,t){var o=this._collectNodeInfo(e);window.inspectorGameMemoryStorage[e.uuid]=e;for(var i=e.getChildren(),n=0;n<i.length;n++){var a=i[n];this._collectChildrenInfo(a,o.children)}t.push(o)},_collectTreeInfo:function(){for(var e=[],t=cc.director.getScene().getChildren(),o=0;o<t.length;o++){var i=t[o];this._collectChildrenInfo(i,e)}return e},wsSend:function(e,t){if(this.ws){var o={code:e,data:t},i=JSON.stringify(o);cc.sys.isBrowser,this.ws.send(i)}},onWebSocketInit:function(){this.ws=new WebSocket("ws://localhost:6543"),this.ws.onopen=function(){this.wsSend(i.Msg.Test,"hello cc-inspector!")}.bind(this),this.ws.onmessage=function(e){cc.sys.isBrowser;var t=JSON.parse(e.data),o=t.code,n=t.data;if(o===i.Msg.GetTreeInfo){var a=this._collectTreeInfo();this.wsSend(i.Msg.GetTreeInfo,a)}else if(o===i.Msg.GetNodeInfo){var s=this.getNodeInfo(n);s&&this.wsSend(i.Msg.GetNodeInfo,s)}else if(o===i.Msg.Position){var c=n.uuid,r=n.data,l=window.inspectorGameMemoryStorage[c];l&&(l.x=r.x,l.y=r.y)}else if(o===i.Msg.Opacity){var u=n.uuid,d=n.data,f=window.inspectorGameMemoryStorage[u];f&&(f.opacity=d)}else if(o===i.Msg.Anchor){var h=n.uuid,p=n.data,v=window.inspectorGameMemoryStorage[h];v&&(v.anchorX=p.x,v.anchorY=p.y)}else if(o===i.Msg.Size){var g=n.uuid,m=n.data,_=window.inspectorGameMemoryStorage[g];_&&(_.width=m.width,_.height=m.height)}else if(o===i.Msg.Scale){var y=n.uuid,w=n.data,S=window.inspectorGameMemoryStorage[y];S&&(S.scaleX=w.x,S.scaleY=w.y)}else if(o===i.Msg.Rotation){var b=n.uuid,C=n.data,T=window.inspectorGameMemoryStorage[b];T&&(T.rotation=C)}else if(o===i.Msg.Skew){var D=n.uuid,I=n.data,k=window.inspectorGameMemoryStorage[D];k&&(k.skewX=I.x,k.skewY=I.y)}else if(o===i.Msg.Color){var L=n.uuid,A=n.data,x=window.inspectorGameMemoryStorage[L];x&&(x.color=cc.color(A))}else if(o===i.Msg.Active){var N=n.uuid,M=n.data,P=window.inspectorGameMemoryStorage[N];P&&(P.active=M)}}.bind(this),this.ws.onerror=function(){this.ws=null}.bind(this),this.ws.onclose=function(){this.ws=null}.bind(this)},_testHttp:function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4===e.readyState&&e.status>=200&&e.status<400&&e.responseText}.bind(this),e.onerror=function(){},e.open("post","http://localhost:6543",!0);try{e.send("test")}catch(e){}},test:function(){}};n.initInspector(),t.exports=n,cc._RF.pop()},{CCInspectorPluginMsg:"CCInspectorPluginMsg",electron:void 0}],wsSDK:[function(e,t,o){"use strict";cc._RF.push(t,"774cdn4Xk9Dxpdyjr56zryV","wsSDK");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.exports.default=function(e){var t={};function o(i){if(t[i])return t[i].exports;var n=t[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}return o.m=e,o.c=t,o.p="",o(0)}([function(e,t,o){var i,n=(i=o(1))&&i.__esModule?i:{default:i},a=o(4),s=o(5),c=o(6),r=o(7),l=o(8),u=o(9),d=o(10),f=o(11),h=o(12),p=o(13),v=o(2),g=o(14);(0,v.initUtil)(n.default),(0,a.initHTTP)(n.default),(0,s.initUser)(n.default),(0,c.initConfig)(n.default),(0,r.initData)(n.default),(0,l.initShare)(n.default),(0,u.initProcess)(n.default),(0,d.initPayment)(n.default),(0,f.initAD)(n.default),(0,h.initHook)(n.default),(0,p.initInvite)(n.default),(0,g.initEvent)(n.default),e.exports=window.ws=n.default},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i,n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},a=(i=o(2))&&i.__esModule?i:{default:i},s={tmp:{},options:{scheme:"https://",host:"api.websdk.cn",apiVersion:"v1",USER_KEY:"ws_user",CONF_KEY:"ws_conf",DATA_KEY:"ws_data",share10:!0,commonDuration:120,allowAld:!1},conf:{},user:{},data:{},version:"1.0.1",mode:"default",debug:!0,shareCallbackData:{},shareTempData:{},shareGiftTempData:{},_initCallbacks:[],_showCallbacks:[],_hideCallbacks:[],_afterHideCallbacks:[],_shareCallbacks:[],_openFromShareCallbacks:[],_openFromCodeCallbacks:[],_onInit:function(){var e=!0,t=!1,o=void 0;try{for(var i,n=this._initCallbacks[Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var a=i.value;a&&a()}}catch(e){t=!0,o=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw o}}},_onShow:function(e){if(console.log("onShow:",e,"mode:",this.mode),"default"!==this.mode)this.shareCallbackData&&this.shareCallbackData.callback&&"shareAppMessage"==this.mode&&(this.shareCallbackData.callback(e,Date.now()-this.shareCallbackData.ms),this.shareCallbackData={}),this.mode="default";else{var t=!0,o=!1,i=void 0;try{for(var n,a=this._showCallbacks[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var c=n.value;c&&c(e)}}catch(e){o=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw i}}if(e.query&&"share"===e.query.type?s._openFromShare("onShow",e.query,e):e.query&&e.query.scene&&"code_"===e.query.scene.substring(0,5)&&s._openFromCode("onShow",e.query.scene,e),this.user&&e.shareTicket&&e.query&&e.query.uid==this.user.id)for(var r in this.shareTempData)r==e.query.share_tid&&s._shareCallback(this.shareTempData[r],e)}},_onHide:function(e){if(console.log("onHide:",e,"mode:",this.mode),"default"===this.mode){var t=!0,o=!1,i=void 0;try{for(var n,a=this._hideCallbacks[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var s=n.value;s&&s(e)}}catch(e){o=!0,i=e}finally{try{!t&&a.return&&a.return()}finally{if(o)throw i}}var c=!0,r=!1,l=void 0;try{for(var u,d=this._afterHideCallbacks[Symbol.iterator]();!(c=(u=d.next()).done);c=!0){var f=u.value;f&&f(e)}}catch(e){r=!0,l=e}finally{try{!c&&d.return&&d.return()}finally{if(r)throw l}}}},_openFromShare:function(e,t,o){var i=!0,n=!1,a=void 0;try{for(var s,c=this._openFromShareCallbacks[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var r=s.value;r&&r({from:e,query:t,options:o})}}catch(e){n=!0,a=e}finally{try{!i&&c.return&&c.return()}finally{if(n)throw a}}},_openFromCode:function(e,t,o){s.get({url:"/share/qrcode",data:{scene:t},success:function(i){var n=!0,a=!1,c=void 0;try{for(var r,l=s._openFromCodeCallbacks[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var u=r.value;u&&u({from:e,scene:t,options:o,query:i.data})}}catch(e){a=!0,c=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw c}}}})},_shareCallback:function(e,t){wx.getShareInfo({shareTicket:t.shareTicket,success:function(o){e.onShareTicketSuccess&&e.onShareTicketSuccess(o),s.shareLog(e,"click",t.shareTicket,o,t)}.bind(this),fail:function(o){e.onShareTicketFail&&e.onShareTicketFail(o),s.shareLog(e,"click",t.shareTicket,{},t)}.bind(this)})},onInit:function(e){this._initCallbacks.push(e)},onShow:function(e){this._showCallbacks.push(e)},onHide:function(e){this._hideCallbacks.push(e)},afterHide:function(e){this._afterHideCallbacks.push(e)},openFromShare:function(e){this._openFromShareCallbacks.push(e)},openFromCode:function(e){this._openFromCodeCallbacks.push(e)},init:function(e){this.options=n({},a.default.copy(e,this.options)),this.systemInfo=wx.getSystemInfoSync(),this.launchOptions=wx.getLaunchOptionsSync(),this.user=wx.getStorageSync(this.options.USER_KEY),this.conf=wx.getStorageSync(this.options.CONF_KEY),this.data=wx.getStorageSync(this.options.DATA_KEY),this.log("conf:",this.conf),wx.onShow(this._onShow.bind(this)),wx.onHide(this._onHide.bind(this))},onLogined:function(){var e=this.launchOptions;e.query&&"share"===e.query.type?s._openFromShare("onLaunch",e.query,e):e.query&&e.query.scene&&"code_"===e.query.scene.substring(0,5)&&s._openFromCode("onLaunch",e.query.scene,e),this._onInit()}};t.default=s},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==i(Symbol.iterator)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":i(e)};t.initUtil=function(e){e.checkSDK=function(e,t){var o=this;return function(i,n){return o.requireSDK(e)?t.apply(o,[i]):(o.log("\u5fae\u4fe1SDK\u7248\u672c\u8fc7\u4f4e\uff1a"+o.systemInfo.SDKVersion+",\u9700\u8981\u66f4\u65b0\u81f3"+e),void(n&&"function"==typeof n&&n([o.systemInfo.SDKVersion,e])))}},e.requireSDK=function(e){return c.compareVersion(this.systemInfo.SDKVersion,e)},e.requireSystemVersion=function(e){return c.compareVersion(this.systemInfo.version,e)},e.isIPhoneX=function(){return this.systemInfo&&-1!=this.systemInfo.model.indexOf("iPhone X")},e.isIOS=function(){return this.systemInfo&&-1!=this.systemInfo.model.indexOf("iOS")},e.isAndroid=function(){return this.systemInfo&&-1!=this.systemInfo.model.indexOf("Android")},e.toFixed=function(e,t){for(var o=e.toFixed(t)+"";"0"===o[o.length-1];)if("."===(o=o.substring(0,o.length-1))[o.length-1]){o=o.substring(0,o.length-1);break}return o},e.log=function(){try{if(this.debug&&console&&console.log){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return console.log.apply(console,t)}}catch(e){}},e.setAlertCallback=function(t){e._alertCallback=t},e.alert=function(t){e._alertCallback?e._alertCallback(t):wx.showModal({content:t})},e.trace=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.post({url:"/log/trace",data:{key:e,pos:t,data:o}})},e.getServerTime=function(){return e.conf&&e.conf.server_time?e.conf.server_time:0}};var a,s=(a=o(3))&&a.__esModule?a:{default:a},c={sign:function(e,t){if("string"==typeof e)return c.signSort(e,t);if("object"==(void 0===e?"undefined":n(e))){var o=[];for(var i in e)o.push(i+"="+e[i]);return c.signSort(o.join("&"),t)}},signSort:function(e,t){var o=e.split("&").sort().join("&")+"&key="+t;return(0,s.default)(o).toUpperCase()},S4:function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},guid:function(){return Date.now()+"-"+c.S4()},compareVersion:function(e,t){var o=parseFloat(e),i=parseFloat(t),n=e.replace(o+".",""),a=t.replace(i+".","");return o>i||!(o<i)&&n>=a},copy:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||(e&&e.push?[]:{});for(var o in e)t[o]="object"===n(e[o])?c.copy(e[o]):e[o];return t},randomSort:function(e){for(var t,o=0;o<e.length;o++){var i=parseInt(Math.random()*e.length+"");t=e[i],e[i]=e[o],e[o]=t}return e}};t.default=c},function(e,t,o){var i;"function"==typeof Symbol&&Symbol.iterator,function(n){function a(e,t){var o=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(o>>16)<<16|65535&o}function s(e,t,o,i,n,s){return a((c=a(a(t,e),a(i,s)))<<(r=n)|c>>>32-r,o);var c,r}function c(e,t,o,i,n,a,c){return s(t&o|~t&i,e,t,n,a,c)}function r(e,t,o,i,n,a,c){return s(t&i|o&~i,e,t,n,a,c)}function l(e,t,o,i,n,a,c){return s(t^o^i,e,t,n,a,c)}function u(e,t,o,i,n,a,c){return s(o^(t|~i),e,t,n,a,c)}function d(e,t){var o,i,n,s,d;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var f=1732584193,h=-271733879,p=-1732584194,v=271733878;for(o=0;o<e.length;o+=16)i=f,n=h,s=p,d=v,f=u(f=l(f=l(f=l(f=l(f=r(f=r(f=r(f=r(f=c(f=c(f=c(f=c(f,h,p,v,e[o],7,-680876936),h=c(h,p=c(p,v=c(v,f,h,p,e[o+1],12,-389564586),f,h,e[o+2],17,606105819),v,f,e[o+3],22,-1044525330),p,v,e[o+4],7,-176418897),h=c(h,p=c(p,v=c(v,f,h,p,e[o+5],12,1200080426),f,h,e[o+6],17,-1473231341),v,f,e[o+7],22,-45705983),p,v,e[o+8],7,1770035416),h=c(h,p=c(p,v=c(v,f,h,p,e[o+9],12,-1958414417),f,h,e[o+10],17,-42063),v,f,e[o+11],22,-1990404162),p,v,e[o+12],7,1804603682),h=c(h,p=c(p,v=c(v,f,h,p,e[o+13],12,-40341101),f,h,e[o+14],17,-1502002290),v,f,e[o+15],22,1236535329),p,v,e[o+1],5,-165796510),h=r(h,p=r(p,v=r(v,f,h,p,e[o+6],9,-1069501632),f,h,e[o+11],14,643717713),v,f,e[o],20,-373897302),p,v,e[o+5],5,-701558691),h=r(h,p=r(p,v=r(v,f,h,p,e[o+10],9,38016083),f,h,e[o+15],14,-660478335),v,f,e[o+4],20,-405537848),p,v,e[o+9],5,568446438),h=r(h,p=r(p,v=r(v,f,h,p,e[o+14],9,-1019803690),f,h,e[o+3],14,-187363961),v,f,e[o+8],20,1163531501),p,v,e[o+13],5,-1444681467),h=r(h,p=r(p,v=r(v,f,h,p,e[o+2],9,-51403784),f,h,e[o+7],14,1735328473),v,f,e[o+12],20,-1926607734),p,v,e[o+5],4,-378558),h=l(h,p=l(p,v=l(v,f,h,p,e[o+8],11,-2022574463),f,h,e[o+11],16,1839030562),v,f,e[o+14],23,-35309556),p,v,e[o+1],4,-1530992060),h=l(h,p=l(p,v=l(v,f,h,p,e[o+4],11,1272893353),f,h,e[o+7],16,-155497632),v,f,e[o+10],23,-1094730640),p,v,e[o+13],4,681279174),h=l(h,p=l(p,v=l(v,f,h,p,e[o],11,-358537222),f,h,e[o+3],16,-722521979),v,f,e[o+6],23,76029189),p,v,e[o+9],4,-640364487),h=l(h,p=l(p,v=l(v,f,h,p,e[o+12],11,-421815835),f,h,e[o+15],16,530742520),v,f,e[o+2],23,-995338651),p,v,e[o],6,-198630844),h=u(h=u(h=u(h=u(h,p=u(p,v=u(v,f,h,p,e[o+7],10,1126891415),f,h,e[o+14],15,-1416354905),v,f,e[o+5],21,-57434055),p=u(p,v=u(v,f=u(f,h,p,v,e[o+12],6,1700485571),h,p,e[o+3],10,-1894986606),f,h,e[o+10],15,-1051523),v,f,e[o+1],21,-2054922799),p=u(p,v=u(v,f=u(f,h,p,v,e[o+8],6,1873313359),h,p,e[o+15],10,-30611744),f,h,e[o+6],15,-1560198380),v,f,e[o+13],21,1309151649),p=u(p,v=u(v,f=u(f,h,p,v,e[o+4],6,-145523070),h,p,e[o+11],10,-1120210379),f,h,e[o+2],15,718787259),v,f,e[o+9],21,-343485551),f=a(f,i),h=a(h,n),p=a(p,s),v=a(v,d);return[f,h,p,v]}function f(e){var t,o="",i=32*e.length;for(t=0;t<i;t+=8)o+=String.fromCharCode(e[t>>5]>>>t%32&255);return o}function h(e){var t,o=[];for(o[(e.length>>2)-1]=void 0,t=0;t<o.length;t+=1)o[t]=0;var i=8*e.length;for(t=0;t<i;t+=8)o[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return o}function p(e){var t,o,i="";for(o=0;o<e.length;o+=1)t=e.charCodeAt(o),i+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return i}function v(e){return unescape(encodeURIComponent(e))}function g(e){return function(e){return f(d(h(e),8*e.length))}(v(e))}function m(e,t){return function(e,t){var o,i,n=h(e),a=[],s=[];for(a[15]=s[15]=void 0,n.length>16&&(n=d(n,8*e.length)),o=0;o<16;o+=1)a[o]=909522486^n[o],s[o]=1549556828^n[o];return i=d(a.concat(h(t)),512+8*t.length),f(d(s.concat(i),640))}(v(e),v(t))}function _(e,t,o){return t?o?m(t,e):p(m(t,e)):o?g(e):p(g(e))}void 0===(i=function(){return _}.call(t,o,t,e))||(e.exports=i)}()},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.initHTTP=function(e){e.request=s,e.get=c,e.post=r,e.put=l,e.delete=u,e.formatURL=d};var i=a(o(1)),n=a(o(2));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.success,o=e.fail;return"GET"==e.method?e.url=d(e.url,e.data):e.url=d(e.url),e.header||(e.header={}),e.header.Authorization=i.default.isLogined()?i.default.user.token:"",e.success=function(n){"LOGIN_REQUIRED"===n.data.key?(i.default.log("login required:",e.url,e,n),i.default.doLogin()):0===n.data.code?(i.default.log("success:",e.url,e,n),t&&t(n.data)):o?(i.default.log("fail:",e.url,e,n),o(n.data)):i.default.log("unknown:",e.url,e,n)},e.fail=function(t){i.default.log("error:",e.url,e,t),o&&o(t)},wx.request(e)}function c(e){return e.method="GET",s(e)}function r(e){return e.method="POST",s(e)}function l(e){return e.method="PUT",s(e)}function u(e){return e.method="DELETE",s(e)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){-1==e.indexOf("?")&&(e+="?");var o=[];if(i.default.isLogined()&&o.push("user="+i.default.user.id),i.default.launchOptions){var a=i.default.launchOptions.query;a&&(a.uid&&o.push("uid="+a.uid),a.channel&&o.push("channel="+a.channel),a.share_id&&o.push("share_id="+a.share_id),a.share_tid&&o.push("share_tid="+a.share_tid),a.pos&&o.push("share_pos="+a.pos),a.scene&&o.push("scene="+decodeURIComponent(a.scene)))}o.push("v="+i.default.version),o.push("version="+i.default.options.version),o.push("appid="+i.default.options.appid),o.push("t="+Date.now()),"?"!==e.charAt(e.length-1)&&"&"!==e.charAt(e.length-1)&&(e+="&");var s=(e+=o.join("&")).split("?")[1];if(t){var c=[];for(var r in t)c.push(r+"="+t[r]);s+="&"+c.join("&")}if((e+="&sign="+n.default.sign(s,i.default.options.secret)).startsWith("/"))return i.default.options.scheme+i.default.options.host+"/"+i.default.options.apiVersion+e}return e}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.initUser=function(e){e.isLogined=function(){return e.user&&e.user.token},e.getLoginStatus=function(){return e.isLogined()?"success":e.isCheckSession||e.isLogining?"logining":"fail"},e.login=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t?e.doLogin(t):(e.isCheckSession=!0,wx.checkSession({success:function(){e.checkLogin(t),e.isCheckSession=!1}.bind(e),fail:function(){e.doLogin(t),e.isCheckSession=!1}.bind(e)}))},e.checkLogin=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e.isLogined()?(e.loginSuccess(),!e.requireSDK("2.0.3")&&e.needUserInfo()&&e.getUserInfo()):e.doLogin(t)},e.checkCode2access=function(t){var o=t.session_key?t:null;e.post({url:"/oauth/code2access_token",data:t,success:function(t){e.isLogining=!1,e.saveUser(t.data),e.checkLogin(o)}.bind(e),fail:e.loginFail.bind(e)})},e.doLogin=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e.isLogining||(e.isLogining=!0,e.user=null,t?e.checkCode2access(t):wx.login({success:function(t){t.code?e.checkCode2access({code:t.code}):e.loginFail(t)}.bind(e),fail:e.loginFail.bind(e)}))},e.loginSuccess=function(t){var o=e.conf&&e.conf.last?e.conf.last:0;!o||Date.now()-o>1e3*e.options.commonDuration?e.getCommon(t):(e.doLoginSuccess(t),e.onLogined())},e.getCommon=function(t){e.get({url:"/common",success:function(o){e.conf=o.data.conf,e.conf.last=Date.now(),wx.setStorage({key:e.options.CONF_KEY,data:e.conf}),e.data||(e.data=o.data.data,wx.setStorage({key:e.options.DATA_KEY,data:e.data})),e.doLoginSuccess(t),e.onLogined()}.bind(e),fail:function(t){e.loginFail(t)}.bind(e)})},e.doLoginSuccess=function(t){e.isLogining=!1,e.loginCompleteCallback&&e.loginCompleteCallback(t),e.loginSuccessCallback&&e.loginSuccessCallback(t)},e.loginFail=function(t){e.isLogining=!1,e.loginCompleteCallback&&e.loginCompleteCallback(t),e.loginFailCallback&&e.loginFailCallback(t)},e.onLoginSuccess=function(t){e.loginSuccessCallback=t},e.onLoginFail=function(t){e.loginFailCallback=t},e.onLoginComplete=function(t){e.loginCompleteCallback=t},e.checkUserInfo=function(){e.needUserInfo()&&e.getUserInfo()},e.needUserInfo=function(){return!e.user||!e.user.nickname||!e.user.avatar},e.getUserInfo=function(){wx.getUserInfo({withCredentials:!0,success:function(t){return e.post({url:"/oauth/update_userinfo",data:t,success:function(t){e.saveUser(t.data),e.needUserInfo()?e.getUserInfoFail(t):e.getUserInfoSuccess()}.bind(e),fail:e.getUserInfoFail.bind(e)}),t}.bind(e),fail:e.getUserInfoFail.bind(e)})},e.getUserInfoSuccess=function(e){},e.getUserInfoFail=function(e){},e.saveUser=function(t){e.user=t,e.user.last=Date.parse(new Date),wx.setStorage({key:e.options.USER_KEY,data:e.user})}}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.initConfig=function(e){e.getConfig=a};var i,n=(i=o(1))&&i.__esModule?i:{default:i};function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n.default.conf&&void 0!==n.default.conf[e]?n.default.conf[e]:t}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.initData=function(e){e.getData=a,e.setData=s,e.setAllData=c,e.incData=r,e.postData=l,e.postGameScore=u,e.getScoreRank=d};var i,n=(i=o(1))&&i.__esModule?i:{default:i};function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n.default.data&&void 0!==n.default.data[e]?n.default.data[e]:t}function s(e,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n.default.data||(n.default.data={}),n.default.data[e]=t,o&&n.default.postData(e)}function c(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.default.data=e,t&&n.default.postData()}function r(e,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=n.default.getData(e,i)+t;return n.default.setData(e,a,o),a}function l(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],wx.setStorage({key:n.default.options.DATA_KEY,data:n.default.data}),n.default.post({url:"/data",data:n.default.data})}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"default",s={};if(e instanceof Object){var c=e;s={id:c.id,score:c.score,time:c.time,version:n.default.options.version,data:c.data,key:c.key}}else s={id:e,score:t,time:o,version:n.default.options.version,data:i,key:a};n.default.post({url:"/score",data:s,success:function(e){n.default.log("\u63d0\u4ea4\u5206\u6570\u6210\u529f\uff1a",t,e)},fail:function(e){n.default.log("\u63d0\u4ea4\u5206\u6570\u5931\u8d25\uff1a",t,e)}})}function d(e){var t=e.key,o=void 0===t?"default":t,i=e.scale,a=void 0===i?"week":i,s=e.skip,c=void 0===s?0:s,r=e.limit,l=void 0===r?10:r,u=e.success,d=void 0===u?null:u,f=e.fail,h=void 0===f?null:f;n.default.get({url:"/score",data:{score_key:o,scale:a,skip:c,limit:l},success:function(e){d&&d(e.data)},fail:function(e){h&&h(e)}})}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.initShare=function(e){e.share=function(t){e.options.allowAld?e.aldShareAppMessage(this.createShareOptions(t)):e.shareAppMessage(this.createShareOptions(t)),this.options.share10&&(this.log("share10"),this.shareLog(t,"share10","",{},{})),t.onShareBack&&(e.shareCallbackData={callback:t.onShareBack,ms:Date.now()})},e.createShareOptions=function(t){t.pos||(t.pos="default");var o=this.getShareInfo(t);t.shareId=o.shareId,t.title||(t.title=o.title),t.imageUrl||(t.imageUrl=o.imageUrl),t.success||(t.success=o.success),t.fail||(t.fail=o.fail),t.onHttpError||(t.onHttpError=o.onHttpError),t.tid||(t.tid=""+Date.now());var i="type=share&pos="+t.pos+"&share_id="+o.shareId+"&share_tid="+t.tid;return this.isLogined()&&(i+="&uid="+this.user.id),t.gift&&(i+="&gift="+t.gift),t.query?"&"==t.query.indexOf(0)?(t.query=i+t.query,e.log("new share query: "+t.query)):(t.query=i+"&"+t.query,e.log("new share query: "+t.query)):t.query=i,e.shareTempData[t.tid]=t,{title:t.title,imageUrl:t.imageUrl,query:t.query,success:this.shareSuccess(t),fail:this.shareFail(t),complete:t.complete}},e.getShareInfo=function(e){var t="",o="";this.options.share&&(t=this.options.share.title,o=this.options.share.imageUrl);var i,n=0;return e.defaultTitle&&(t=e.defaultTitle),this.conf&&this.conf.shares&&(this.conf.shares[e.pos]?i=this.conf.shares[e.pos]:this.conf.shares.default&&(i=this.conf.shares.default),i&&(i.title&&(t=i.title),i.image&&(o=i.image),i.id&&(n=i.id))),{title:t,imageUrl:o,shareId:n,success:function(){wx.showToast({title:"\u5206\u4eab\u6210\u529f\uff01",icon:"success"})},fail:function(){wx.showToast({title:"\u5206\u4eab\u5931\u8d25\uff01",icon:"fail"})},onHttpError:function(){wx.showToast({title:"\u7f51\u7edc\u51fa\u9519\uff01",icon:"fail"})}}},e.shareSuccess=function(t){return function(o){console.log("shareSuccess"),delete e.shareTempData[t.tid];var i=!0;t.onShareSuccess&&(i=t.onShareSuccess(o)),i&&(o.shareTickets&&o.shareTickets.length>0?wx.getShareInfo({shareTicket:o.shareTickets[0],success:function(e){t.onShareTicketSuccess&&t.onShareTicketSuccess(e),this.shareLog(t,"success",o.shareTickets[0],e,o)}.bind(this),fail:function(e){t.onShareTicketFail&&t.onShareTicketFail(e),this.shareLog(t,"success",o.shareTickets[0],{},o)}.bind(this)}):(t.onShareTicketFail&&t.onShareTicketFail(),this.shareLog(t,"success","",{},o)))}.bind(this)},e.shareFail=function(e){return function(t){console.log("shareFail");var o=!0;e.onShareFail&&(o=e.onShareFail(t)),o&&this.shareLog(e,"fail","",{},t)}.bind(this)},e.shareLog=function(t,o,i,n,a){this.post({url:"/log/share",data:{share_id:t.shareId,title:t.title,query:t.query,image:t.imageUrl,pos:t.pos,tid:t.tid,status:o,shareTicket:i,info:n,error:a.errMsg,system_version:e.systemInfo.system,sdk_version:e.systemInfo.SDKVersion},success:function(i){"success"!==o&&"click"!==o||!t.success?"fail"===o&&t.fail&&t.fail(i,a):(t.success(i,a),delete e.shareTempData[t.tid])},fail:function(e){"success"!==o&&"click"!==o||!t.onHttpError?"fail"===o&&t.fail&&t.fail(e,a):t.onHttpError(e,a)}})},e.isEnableShare=function(){return!(!e.conf||!e.conf.allow_share||e.requireSystemVersion("6.7.0"))}}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e};t.initProcess=function(e){e.onShow(function(e){r=Date.now(),c.showOptions=JSON.stringify(e)}),e.afterHide(function(t){var o=Date.now(),n=c=i({},c,{times:c.times+1,showDuration:r?o-r:o-c.initStartAt,duration:o-c.initStartAt}),a=(n.hasInited,n.initStartAt,function(e,t){var o={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(o[i]=e[i]);return o}(n,["hasInited","initStartAt"]));c.hasInited?u(a):(c.hasInited=!0,u(i({systemInfo:JSON.stringify(e.systemInfo),launchOptions:JSON.stringify(e.launchOptions)},a)))}),e.setProcess=l};var n=s(o(1)),a=s(o(2));function s(e){return e&&e.__esModule?e:{default:e}}var c={hasInited:!1,initStartAt:Date.now(),showOptions:"",times:0,uuid:a.default.guid(),duration:0,showDuration:0,process:"init",processDuration:0},r=0;function l(e){"string"==typeof e?(c.process=e,c.processDuration=Date.now()-c.initStartAt):n.default.log("setProcess():  \u53c2\u6570\u7c7b\u578b\u9519\u8bef")}function u(e){n.default.post({url:"/log/process",data:e,success:function(e){n.default.log("\u63d0\u4ea4\u6e38\u620f\u8fdb\u5ea6\u6570\u636e\u6210\u529f\uff1a",e)},fail:function(e){n.default.log("\u63d0\u4ea4\u6e38\u620f\u8fdb\u5ea6\u6570\u636e\u5931\u8d25\uff1a",e)}})}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.initPayment=function(e){e.getPaymentResult=function(e){var t=e.success,o=void 0===t?null:t,i=e.fail,n=void 0===i?null:i;this.get({url:"/payment/result",success:function(e){this.log("\u83b7\u53d6\u5145\u503c\u6570\u636e\u6210\u529f",e),o&&o(e.data)}.bind(this),fail:function(e){this.log("\u83b7\u53d6\u5145\u503c\u6570\u636e\u5931\u8d25",e),n&&n(e)}.bind(this)})},e.requestMPPayment=function(t){var o=this,i=t.title,n=void 0===i?"\u70b9\u51fb\u5145\u503c\u94fe\u63a5\u8fdb\u5165\u5145\u503c":i,a=t.pos,s=void 0===a?"default":a,c=t.image,r=void 0===c?null:c,l=t.success,u=void 0===l?null:l,d=t.fail,f=void 0===d?null:d,h=t.complete,p=void 0===h?null:h;this.log("\u6253\u5f00\u5ba2\u670d\u5bf9\u8bdd"),e.openCustomerServiceConversation({sessionFrom:s,showMessageCard:!0,sendMessageTitle:n,sendMessagePath:"?type=message",sendMessageImg:r||e.conf.shares.default.image,success:function(e){o.log("\u6253\u5f00\u5145\u503c\u4f1a\u8bdd\u6210\u529f",e),p&&p(),u&&u()},fail:function(e){o.log("\u6253\u5f00\u5145\u503c\u4f1a\u8bddfail",e),p&&p(),f&&f()}})},e.requestMPPayment=e.checkSDK("2.0.3",e.requestMPPayment)}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e};t.initAD=function(e){e.onShow(function(){for(var t in c){var o=c[t];o.isShow&&(e.createBanner({pos:o.pos,style:o.style,ms:o.ms,onResize:o.onResize}),o.isShow=!1)}for(var i=0;i<u.length;i++){var n=u[i];l[n].showed=!0,l[n].last=Date.now()}u=[]}),e.afterHide(function(){for(var e in c){var t=c[e];t.isShow=t.showed,t.isShow&&f(t.pos),t.duration>0&&h(t)}for(var o in l)l[o].showed&&(T(o),u.push(o));k({ads:l})}),e.createBanner=e.checkSDK("2.0.4",d),e.closeBanner=e.checkSDK("2.0.4",f),e.createVideo=e.checkSDK("2.0.4",v),e.isEnableVideo=p,e.getMoreGame=m,e.showMoreGame=_,e.getGameAd=S,e.hideGameAd=T,e.tapGameAd=D,e.fetchGameAd=b,e.getPromoGameAd=C};var n=s(o(1)),a=s(o(2));function s(e){return e&&e.__esModule?e:{default:e}}var c={},r={},l={},u=[];function d(e){var t=e.pos,o=e.style,a=void 0===o?null:o,s=e.ms,l=void 0===s?0:s,u=e.force,p=void 0!==u&&u,v=e.forceTimeout,g=void 0===v?600:v,m=e.onResize,_=void 0===m?null:m;if(n.default.conf&&n.default.conf.banners&&n.default.conf.banners[t]){var y=n.default.conf.banners[t];if(y.enable){var w=void 0,S=c[t];S&&(w=r[S.adUnitId])&&(S.showed&&f(S),(p||Date.now()-w.created>1e3*g)&&function(e){var t=r[e.adUnitId];if(t)t.hide(),t.destroy(),delete r[e.adUnitId]}(S)),l||(l=n.default.getConfig("banner_ms",120)),S||(S={adUnitId:y.adUnitId,pos:t,count:0,ms:l,duration:0,style:a,width:y.width?y.width>1?1:y.width:1,window:"*",data:[],onResize:_,created:Date.now()},c[t]=S),S.count+=1,S.status="success",(w=r[S.adUnitId])||(w=r[S.adUnitId]=function(e){var t=e.banner,o=e.style,a=void 0===o?null:o,s=n.default.systemInfo.screenWidth*t.width,r=(n.default.systemInfo.screenHeight,wx.createBannerAd({adUnitId:t.adUnitId,style:i({left:0,top:0,width:s,height:180*s/750},a)}));return r.created=Date.now(),r.onError(function(e){t.status="error",t.error=e,t.timeout&&clearTimeout(t.timeout),t.timeout=null,t.showed=null,h(t,"error"),n.default.log("banner \u521b\u5efa\u5931\u8d25",t),c[t.pos]&&delete c[t.pos]}),r.onResize(function(e){t.onResize&&t.onResize(e,r)}),r.onLoad(function(e){n.default.log("banner \u52a0\u8f7d\u5b8c\u6210",t),r.created=Date.now()}),r}({banner:S,style:a})),S.showed=Date.now(),setTimeout(function(){w.show()},.01),S.ms&&w&&(S.timeout&&clearTimeout(S.timeout),S.timeout=setTimeout(function(){d({pos:t,style:a,ms:l,force:!0,onResize:_})},1e3*l))}}else n.default.log("createBanner \u6ca1\u6709\u914d\u7f6e: "+t)}function f(e){var t=c[e];if(t&&t.showed){var o=r[t.adUnitId];if(o){var i=o.style,n=i.realWidth,a=i.realHeight,s=Date.now()-t.showed;return o.hide(),t.duration+=s,t.data.push({created:o.created,showed:t.showed,duration:s}),t.timeout&&clearTimeout(t.timeout),t.timeout=null,t.showed=null,t.window=n+"*"+Math.round(a),!0}}return!1}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"onHide",o={adUnitId:e.adUnitId,pos:e.pos,ms:e.ms,count:e.count,duration:e.duration,data:JSON.stringify(e.data),window:e.window,status:e.status,error:e.error,commit:t};e.count=0,e.duration=0,e.status="success",e.error="",e.data=[],n.default.log("postBannerData",o),n.default.post({url:"/log/ad/banner",data:o,success:function(e){n.default.log("\u63d0\u4ea4banner\u6570\u636e\u6210\u529f\uff1a",e)},fail:function(e){n.default.log("\u63d0\u4ea4banner\u6570\u636e\u5931\u8d25\uff1a",e)}})}function p(e){return n.default.conf&&n.default.conf.videos&&n.default.conf.videos[e]?!!n.default.conf.videos[e].enable:(n.default.log("createVideo \u6ca1\u6709\u914d\u7f6e: "+e),!1)}function v(e){var t=e.pos,o=e.success,i=void 0===o?null:o,a=e.fail,s=void 0===a?null:a,c=e.complete,r=void 0===c?null:c;if(!p(t))return!1;var l={adUnitId:n.default.conf.videos[t].adUnitId,pos:t,status:"success",created:Date.now(),duration:0},u=wx.createRewardedVideoAd({adUnitId:l.adUnitId});function d(e){l.status="error",l.error=e,g(l),r&&r(e),s&&s(e),v()}function f(e){l.created=Date.now()}function h(e){r&&r(e),l.duration=Date.now()-l.created,e&&e.isEnded||void 0===e?i&&i({isEnded:!0,duration:l.duration}):(l.status="cancel",i&&i({isEnded:!1,duration:l.duration})),g(l),v()}function v(){u.offError(d),u.offLoad(f),u.offClose(h)}return u.onError(d),u.onLoad(f),u.onClose(h),u.show().catch(function(e){console.log("ws.createVideo error:",e),u.load().then(function(){return u.show()})}),!0}function g(e){n.default.post({url:"/log/ad/rewardedvideo",data:e,success:function(e){n.default.log("\u63d0\u4ea4\u6fc0\u52b1\u89c6\u9891\u6570\u636e\u6210\u529f\uff1a",e)},fail:function(e){n.default.log("\u63d0\u4ea4\u6fc0\u52b1\u89c6\u9891\u6570\u636e\u5931\u8d25\uff1a",e)}})}function m(e){var t;if(n.default.conf&&n.default.conf.games&&(n.default.conf.games[e]?t=n.default.conf.games[e]:n.default.conf.games.default&&(t=n.default.conf.games.default),t&&t.length>0)){n.default.tmp.getMoreGame||(n.default.tmp.getMoreGame={});var o=n.default.tmp.getMoreGame[e];return(!o||o>=t.length)&&(o=0),n.default.tmp.getMoreGame[e]=o+1,t[o]}}function _(e){var t;if(n.default.conf&&n.default.conf.games)if(n.default.conf.games[e]?t=n.default.conf.games[e]:n.default.conf.games.default&&(t=n.default.conf.games.default),t&&t.length>0){for(var o=[],i=0;i<t.length;i++)o.push(t[i].image);n.default.previewImage({urls:a.default.randomSort(o)})}else wx.showToast({title:"\u6ca1\u6709\u66f4\u591a\u6e38\u620f\uff01",icon:"info"});else wx.showToast({title:"\u6ca1\u6709\u66f4\u591a\u6e38\u620f\uff01",icon:"info"})}function y(e){return l&&l[e]?(l[e].showed&&T(e),l[e]):null}function w(e){for(var t in e)l[t]={pos:t,data:e[t]?e[t]:[],last:Date.now(),duration:0,total_ms:0,logs:[],showed:!0}}function S(e){var t=e.pos,o=void 0===t?"default":t,i=e.count,a=void 0===i?1:i,s=e.success,c=void 0===s?null:s,r=e.fail,u=void 0===r?null:r,d=y(o);d?(l[o].showed=!0,c&&c({code:0,data:d.data,key:"SUCCESS"})):n.default.get({url:"/game/ad",data:{pos:o,count:a},success:function(e){if(0==e.code){if(!Array.isArray(e.data)||Array.isArray(e.data)&&0!=e.data.length){var t={};t[o]=e.data,w(t)}c&&c(e)}else u&&u(e)},fail:function(e){u&&u(e)}})}function b(e){var t=e.data,o=void 0===t?[{pos:"default",count:1}]:t,i=e.success,a=void 0===i?null:i,s=e.fail,c=void 0===s?null:s,r={},u=!1,d=!0,f=!1,h=void 0;try{for(var p,v=o[Symbol.iterator]();!(d=(p=v.next()).done);d=!0){y(p.value.pos)||(u=!0)}}catch(e){f=!0,h=e}finally{try{!d&&v.return&&v.return()}finally{if(f)throw h}}if(r&&k({ads:r}),u)n.default.post({url:"/game/ad",data:{pos:o},success:function(e){0==e.code?(e.data&&w(e.data),a&&a(e)):c&&c(e)},fail:function(e){c&&c(e)}});else{var g={},m=!0,_=!1,S=void 0;try{for(var b,C=o[Symbol.iterator]();!(m=(b=C.next()).done);m=!0){var T=b.value;l[T.pos].showed=!0,g[T.pos]=l[T.pos].data}}catch(e){_=!0,S=e}finally{try{!m&&C.return&&C.return()}finally{if(_)throw S}}a&&a({code:0,data:g,key:"SUCCESS"})}}function C(e){var t=e.pos,o=void 0===t?"default":t,i=e.count,a=void 0===i?1:i,s=e.success,c=void 0===s?null:s,r=e.fail,u=void 0===r?null:r,d=e.force,f=void 0===d||d,h=y(o);!f&&h?(l[o].showed=!0,c&&c({code:0,data:h.data,key:"SUCCESS"})):n.default.get({url:"/game/ad/feature",data:{pos:o,count:a},success:function(e){if(0==e.code){if(!Array.isArray(e.data)||Array.isArray(e.data)&&0!=e.data.length){var t={};t[o]=e.data,w(t)}c&&c(e)}else u&&u(e)},fail:function(e){u&&u(e)}})}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;function t(e){var t=Date.now(),o=t-e.last;e.logs.push({ms:o,last:e.last,posted:!1}),e.total_ms+=o,e.last=t}if(!e||l[e])if(e)t(l[e]);else for(var o in l)t(l[o])}(e),l[e]&&(l[e].showed=!1)}function D(e){var t=e.ad,o=e.pos,i=void 0===o?"default":o,a=e.redirect,s=void 0!==a&&a,c=e.success,r=void 0===c?null:c,u=e.fail,d=void 0===u?null:u,f=e.complete,h=void 0===f?null:f,p=t;function v(e){e.image?n.default.previewImage({urls:[e.image],success:function(e){n.default.log("tapGameAD, success"),r&&r(e)},fail:function(e){n.default.log("tapGameAD, fail"),d&&d(e)},complete:function(e){n.default.log("tapGameAD, complete"),h&&h(e)}}):n.default.log("tapGameAD\uff0cad\u53c2\u6570\u5185image\u5c5e\u6027\u7f3a\u5931")}function g(e){n.default.requireSDK("2.2.0")?e.appid?wx.navigateToMiniProgram({appId:e.appid,path:e.path,success:function(e){n.default.log("tapGameAD, success"),r&&r(e)},fail:function(e){n.default.log("tapGameAD, fail"),d&&d(e)},complete:function(e){n.default.log("tapGameAD, complete"),h&&h(e)}}):n.default.log("tapGameAD, ad\u53c2\u6570\u5185appid\u5c5e\u6027\u7f3a\u5931"):e.image?v(e):n.default.alert("\u5f53\u524d\u5fae\u4fe1\u7248\u672c\u8fc7\u4f4e\uff0c\u65e0\u6cd5\u4f7f\u7528\u8be5\u529f\u80fd\uff0c\u8bf7\u5347\u7ea7\u5230\u6700\u65b0\u5fae\u4fe1\u7248\u672c\u540e\u91cd\u8bd5\u3002")}l&&l[i]&&p?(function(e,t){if(!t||!t.cid||!t.id)return!1;I([{pos:e,tid:t.tid,commit:"click",data:[{cid:t.cid,id:t.id,action:t.action}]}])}(i,p),"code"==p.action?v(p):"navigate"==p.action?g(p):s?g(p):v(p)):n.default.log("tapGameAD pos\u65e0\u6548\uff0c\u6ca1\u6709\u5bf9\u5e94\u6570\u636e\uff0c\u6216\u672a\u4f20ad\u53c2\u6570")}function I(e){n.default.post({url:"/game/ad/log",data:e,success:function(t){for(var o=0;o<e.length;o++){var i=e[o];"show"==i.commit&&i.pos in l&&(l[i.pos].logs=[])}n.default.log("\u5e7f\u544a\u6570\u636e\u63d0\u4ea4\u6210\u529f\uff01")},fail:function(e){n.default.log("\u5e7f\u544a\u6570\u636e\u63d0\u4ea4\u5931\u8d25\uff01")}})}function k(e){var t=e.ads,o=void 0===t?null:t,i=e.ad,n=void 0===i?null:i;if(!o&&!n)return!1;function a(e){for(var t=[],o=0,i=null,n=0;n<e.logs.length;n++)e.logs[n].posted||(o+=e.logs[n].ms,i=e.logs[n].last);if(!o||!e.data)return t;for(var a={pos:e.pos,tid:e.data[0].tid,commit:"show",last:i,ms:o,data:[]},s=0;s<e.data.length;s++)a.data.push({id:e.data[s].id,cid:e.data[s].cid,action:e.data[s].action});return t.push(a),t}var s=[];if(o)for(var c in o)s=s.concat(a(o[c]));else n&&(s=a(n));s.length>0&&I(s)}},function(e,t,o){var i;function n(e,t){e[t]=function(){var o;return e.mode=t,"aldShareAppMessage"==t&&(e.mode="shareAppMessage"),(o=wx)[t].apply(o,arguments)}}Object.defineProperty(t,"__esModule",{value:!0}),t.initHook=function(e){e.setMode=function(t){e.mode=t},n(e,"previewImage"),n(e,"openCustomerServiceConversation"),n(e,"shareAppMessage"),n(e,"aldShareAppMessage")},(i=o(1))&&i.__esModule},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e};t.initInvite=function(e){e.getInviteCount=c,e.getInviteUsers=r,e.receiveInviteGift=l,e.receiveInviteGifts=u,e.openFromShare(f),e.openFromCode(h),e.onShareGift=p,e.requestShareGift=v,e.receiveShareGift=g,e.getWXACode=m,e.saveWXACode=_};var n,a=(n=o(1))&&n.__esModule?n:{default:n};function s(e,t){var o={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(o[i]=e[i]);return o}function c(e){var t=e.pos,o=void 0===t?null:t,i=e.success,n=void 0===i?null:i,s=e.fail,c=void 0===s?null:s,r={};o&&(r.pos=o),a.default.get({url:"/invited/users/count",data:r,success:function(e){n&&n(e.data.count)},fail:function(e){c&&c(e)}})}function r(e){var t=e.pos,o=void 0===t?null:t,i=e.receive,n=void 0===i||i,s=e.skip,c=void 0===s?0:s,r=e.limit,l=void 0===r?-1:r,u=e.success,d=void 0===u?null:u,f=e.fail,h=void 0===f?null:f,p={skip:c,limit:l,receive:n};o&&(p.pos=o),a.default.get({url:"/invited/users",data:p,success:function(e){d&&d(e.data)},fail:function(e){h&&h(e)}})}function l(e){var t=e.user,o=e.pos,i=void 0===o?null:o,n=e.success,s=void 0===n?null:n,c=e.fail,r=void 0===c?null:c,l={users:[{id:t.id,gift:t.gift}]};i&&(l.pos=i),a.default.post({url:"/invited/gift/receive",data:l,success:function(e){s&&s(e.data.receive[0])},fail:function(e){r&&r(e)}})}function u(e){var t=e.users,o=e.pos,i=void 0===o?null:o,n=e.success,s=void 0===n?null:n,c=e.fail,r=void 0===c?null:c,l={users:[]},u=!0,d=!1,f=void 0;try{for(var h,p=t[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var v=h.value;l.users.push({id:v.id,gift:v.gift})}}catch(e){d=!0,f=e}finally{try{!u&&p.return&&p.return()}finally{if(d)throw f}}i&&(l.pos=i),a.default.post({url:"/invited/gift/receive",data:l,success:function(e){s&&s(e.data.receive)},fail:function(e){r&&r(e)}})}function d(e,t){if(t&&t.gift){var o={type:e,gift:t.gift,uid:t.uid,share_tid:t.share_tid},i=a.default.conf[t.gift];i&&(o.receive=!0),a.default.post({url:"/share/gift/log",data:o,success:function(e){if(i){var n=e.data;n.is_self&&i.not_allow_self?a.default.alert(i.not_allow_self_tip||"\u4e0d\u80fd\u9886\u53d6\u81ea\u5df1\u9001\u51fa\u7684\u793c\u7269\uff5e"):n.user_count>=(i.date_limit||2)?a.default.alert(i.date_limit_tip||"\u4eca\u5929\u5df2\u7ecf\u9886\u53d6\u592a\u591a\u6b21\u4e86\uff5e"):n.user_share_count>=(i.share_date_limit||1)?a.default.alert(i.share_date_limit_tip||"\u5df2\u7ecf\u9886\u53d6\u8fc7\u8be5\u793c\u7269\u4e86\uff5e"):n.count>=(i.limit||10)?a.default.alert(i.limit_tip||"\u8be5\u793c\u7269\u88ab\u9886\u5149\u4e86\uff5e"):(e={gift:t.gift,query:t,conf:i,options:o,data:n},a.default._onGiftCallback&&a.default._onGiftCallback(e))}}})}}function f(e){e.from;var t=e.query;e.options,d("share",t)}function h(e){e.from,e.scene,e.options,d("code",e.query)}function p(e){a.default._onGiftCallback=e}function v(e){var t=e.gifts,o=e.users,i=void 0===o||o,n=e.receive,s=void 0===n||n,c=e.dateLimit,r=void 0===c?0:c,l=e.cache,u=void 0===l?60:l,d=e.limit,f=void 0===d?0:d,h=e.success,p=void 0===h?null:h,v=e.fail,g=void 0===v?null:v;if("boolean"==typeof i&&"boolean"==typeof s&&"number"==typeof r&&"number"==typeof u&&"number"==typeof f){var m=!0,_=[t.sort().toString(),i,s,r,f].join("-");a.default.shareGiftTempData&&a.default.shareGiftTempData[_]&&Date.now()-a.default.shareGiftTempData[_].ms<1e3*u&&(m=!1),m?a.default.post({url:"/share/gift/receive",data:{gifts:t,is_users:i,receive:s,date_limit:r,limit:f},success:function(e){a.default.shareGiftTempData[_]={data:e.data,ms:Date.now()},p&&p(e.data)},fail:g}):p&&p(a.default.shareGiftTempData[_].data)}else a.default.log("requestShareGift, \u53c2\u6570\u683c\u5f0f\u5f02\u5e38")}function g(e){var t=e.users,o=e.success,i=void 0===o?null:o,n=e.fail,s=void 0===n?null:n;Array.isArray(t)?a.default.post({url:"/share/gift/receive2",data:{users:t},success:function(e){i&&i(e)},fail:function(e){s&&s(e)}}):a.default.log("receiveShareGift, users\u53c2\u6570\u683c\u5f0f\u9519\u8bef")}function m(e){var t=e.pos,o=e.bg,n=void 0===o||o,c=e.success,r=void 0===c?null:c,l=e.fail,u=void 0===l?null:l,d=s(e,["pos","bg","success","fail"]);a.default.post({url:"/share/qrcode",data:i({pos:t,bg:n,uid:a.default.user.id,share_tid:Date.now()+""},d),success:function(e){r&&r(e.data)},fail:u})}function _(e){var t=e.pos,o=e.bg,n=void 0===o||o,c=e.filePath,r=void 0===c?"":c,l=e.success,u=void 0===l?null:l,d=e.fail,f=void 0===d?null:d,h=e.complete,p=void 0===h?null:h,v=s(e,["pos","bg","filePath","success","fail","complete"]);m(i({pos:t,bg:n,success:function(e){!function(e){var t=e.codeUrl;wx.downloadFile({url:t,filePath:r,success:function(e){200==e.statusCode&&(a.default.alert("download success",e.tempFilePath),a.default.log("download success",e.tempFilePath),r||(r=e.tempFilePath,wx.saveImageToPhotosAlbum({filePath:e.tempFilePath,success:function(e){u&&u(e)},fail:function(e){f&&f(e)},complete:function(e){p&&p(e)}})))},fail:function(e){f&&f(e)},complete:function(e){p&&p(e)}})}(e)},fail:f},v))}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.initEvent=function(e){e.afterHide(function(){n.default.post({url:"/log/event",data:a,success:function(e){0==e.code&&(a.events=[]),n.default.log("\u4e8b\u4ef6\u65e5\u5fd7\u63d0\u4ea4\u6210\u529f\uff01")},fail:function(e){n.default.log("\u4e8b\u4ef6\u65e5\u5fd7\u63d0\u4ea4\u5931\u8d25\uff01")}})}),e.traceEvent=s};var i,n=(i=o(1))&&i.__esModule?i:{default:i},a={index:0,events:[]};function s(e,t){a.index+=1,a.events.push({event:e,data:t?JSON.stringify(t):null,tm:Date.now()})}}]),cc._RF.pop()},{}],ws:[function(e,t,o){"use strict";cc._RF.push(t,"611fd1hQltLk6VI0ZOYZeSu","ws"),Object.defineProperty(o,"__esModule",{value:!0});var i=e("./wsSDK").default;o.default=i,cc._RF.pop()},{"./wsSDK":"wsSDK"}],wx:[function(e,t,o){"use strict";cc._RF.push(t,"bb83fKjnlFMP6AOe3VU5hX1","wx"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=window.wx,cc._RF.pop()},{}]},{},["CCInspectorPluginMsg","inspector","Const","Global","ws","wsSDK","wx","Ad","AudioMgr","BtnAni","Loading","Reward","ScrollViewBetter","GameView","HomeView","LvlSelect","OverView"]);