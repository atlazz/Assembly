{"version":3,"sources":["C:\\Users\\win10\\.CocosCreator\\packages\\cc-inspector\\plugin/C:\\Users\\win10\\.CocosCreator\\packages\\cc-inspector\\plugin\\inspector.js"],"names":["CCInspectorPluginMsg","require","inspector","log","arguments","length","initInspector","window","inspectorGameMemoryStorage","onWebSocketInit","_collectNodeInfo","e","t","_getNodeComponentsInfo","name","active","uuid","type","constructor","x","y","zIndex","childrenCount","children","width","height","color","r","g","b","a","opacity","rotation","rotationX","rotationY","anchorX","anchorY","scaleX","scaleY","skewX","skewY","components","getNodeInfo","o","_components","n","push","cc","js","getClassName","_collectChildrenInfo","getChildren","_collectTreeInfo","director","getScene","wsSend","ws","code","data","JSON","stringify","sys","isBrowser","send","WebSocket","onopen","Msg","Test","bind","onmessage","parse","GetTreeInfo","GetNodeInfo","Position","Opacity","Anchor","Size","Scale","Rotation","Skew","Color","Active","onerror","onclose","_testHttp","XMLHttpRequest","onreadystatechange","readyState","status","responseText","open","test","CC_EDITOR","Editor","ipcRenderer","on","module","exports"],"mappings":"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","file":"inspector.js","sourceRoot":"C:\\Users\\win10\\.CocosCreator\\packages\\cc-inspector\\plugin","sourcesContent":["const CCInspectorPluginMsg=require(\"CCInspectorPluginMsg\");let inspector={log(){1===arguments.length||2===arguments.length||arguments.length},initInspector(){window.inspectorGameMemoryStorage=window.inspectorGameMemoryStorage||{},this.onWebSocketInit()},_collectNodeInfo(e){if(e){let t=this._getNodeComponentsInfo(e);return{name:e.name,active:e.active,uuid:e.uuid,type:e.constructor.name,x:e.x,y:e.y,zIndex:e.zIndex,childrenCount:e.childrenCount,children:[],width:e.width,height:e.height,color:{r:e.color.r,g:e.color.g,b:e.color.b,a:e.color.a},opacity:e.opacity,rotation:e.rotation,rotationX:e.rotationX,rotationY:e.rotationY,anchorX:e.anchorX,anchorY:e.anchorY,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,components:t}}return null},getNodeInfo(e){let t=window.inspectorGameMemoryStorage[e];return t?this._collectNodeInfo(t):null},_getNodeComponentsInfo(e){let t=[],o=e._components;for(let e=0;e<o.length;e++){let n=o[e];window.inspectorGameMemoryStorage[n.uuid]=n,t.push({uuid:n.uuid,type:n.constructor.name,name:cc.js.getClassName(n)})}return t},_collectChildrenInfo(e,t){let o=this._collectNodeInfo(e);window.inspectorGameMemoryStorage[e.uuid]=e;let n=e.getChildren();for(let e=0;e<n.length;e++){let t=n[e];this._collectChildrenInfo(t,o.children)}t.push(o)},_collectTreeInfo(){let e=[],t=cc.director.getScene().getChildren();for(let o=0;o<t.length;o++){let n=t[o];this._collectChildrenInfo(n,e)}return e},wsSend(e,t){if(this.ws){let o={code:e,data:t},n=JSON.stringify(o);cc.sys.isBrowser,this.ws.send(n)}},onWebSocketInit(){this.ws=new WebSocket(\"ws://localhost:6543\"),this.ws.onopen=function(){this.wsSend(CCInspectorPluginMsg.Msg.Test,\"hello cc-inspector!\")}.bind(this),this.ws.onmessage=function(e){cc.sys.isBrowser;let t=JSON.parse(e.data),o=t.code,n=t.data;if(o===CCInspectorPluginMsg.Msg.GetTreeInfo){let e=this._collectTreeInfo();this.wsSend(CCInspectorPluginMsg.Msg.GetTreeInfo,e)}else if(o===CCInspectorPluginMsg.Msg.GetNodeInfo){let e=this.getNodeInfo(n);e&&this.wsSend(CCInspectorPluginMsg.Msg.GetNodeInfo,e)}else if(o===CCInspectorPluginMsg.Msg.Position){let e=n.uuid,t=n.data,o=window.inspectorGameMemoryStorage[e];o&&(o.x=t.x,o.y=t.y)}else if(o===CCInspectorPluginMsg.Msg.Opacity){let e=n.uuid,t=n.data,o=window.inspectorGameMemoryStorage[e];o&&(o.opacity=t)}else if(o===CCInspectorPluginMsg.Msg.Anchor){let e=n.uuid,t=n.data,o=window.inspectorGameMemoryStorage[e];o&&(o.anchorX=t.x,o.anchorY=t.y)}else if(o===CCInspectorPluginMsg.Msg.Size){let e=n.uuid,t=n.data,o=window.inspectorGameMemoryStorage[e];o&&(o.width=t.width,o.height=t.height)}else if(o===CCInspectorPluginMsg.Msg.Scale){let e=n.uuid,t=n.data,o=window.inspectorGameMemoryStorage[e];o&&(o.scaleX=t.x,o.scaleY=t.y)}else if(o===CCInspectorPluginMsg.Msg.Rotation){let e=n.uuid,t=n.data,o=window.inspectorGameMemoryStorage[e];o&&(o.rotation=t)}else if(o===CCInspectorPluginMsg.Msg.Skew){let e=n.uuid,t=n.data,o=window.inspectorGameMemoryStorage[e];o&&(o.skewX=t.x,o.skewY=t.y)}else if(o===CCInspectorPluginMsg.Msg.Color){let e=n.uuid,t=n.data,o=window.inspectorGameMemoryStorage[e];o&&(o.color=cc.color(t))}else if(o===CCInspectorPluginMsg.Msg.Active){let e=n.uuid,t=n.data,o=window.inspectorGameMemoryStorage[e];o&&(o.active=t)}}.bind(this),this.ws.onerror=function(){this.ws=null}.bind(this),this.ws.onclose=function(){this.ws=null}.bind(this)},_testHttp(){let e=new XMLHttpRequest;e.onreadystatechange=function(){if(4===e.readyState&&e.status>=200&&e.status<400)e.responseText}.bind(this),e.onerror=function(){},e.open(\"post\",\"http://localhost:6543\",!0);try{e.send(\"test\")}catch(e){}},test(){if(CC_EDITOR){Editor.log(\"initInspector in editor\");const{ipcRenderer:e}=require(\"electron\");e.on(\"msg1\",function(){Editor.log(\"收到msg1的消息\")}),e.on(\"ipc-message\",function(){Editor.log(\"ipc-message\")})}}};inspector.initInspector(),module.exports=inspector;"]}