{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\view/assets\\scripts\\view\\GameView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\view","sourcesContent":["import Global from \"../Global\";\r\nimport * as Const from \"../Const\";\r\nimport LvlSelect from \"./LvlSelect\";\r\nimport OverView from \"./OverView\";\r\nimport ScrollViewBetter from \"../component/ScrollViewBetter\";\r\nimport AudioMgr from \"../component/AudioMgr\";\r\nimport wx from \"../SDK/wx\";\r\nimport ws from \"../SDK/ws\";\r\nimport Loading from \"../component/Loading\";\r\nimport Reward from \"../component/Reward\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GameView extends cc.Component {\r\n    @property(cc.Node)\r\n    btn_back: cc.Node = null;\r\n    @property(cc.Node)\r\n    btn_restart: cc.Node = null;\r\n    @property(cc.Node)\r\n    btn_hint: cc.Node = null;\r\n    @property(cc.Node)\r\n    progressBar: cc.Node = null;\r\n    @property(cc.Node)\r\n    frame_solution: cc.Node = null;\r\n    @property(cc.Node)\r\n    frame_question: cc.Node = null;\r\n    @property(cc.Node)\r\n    title: cc.Node = null;\r\n    @property(cc.Node)\r\n    lvlLabel: cc.Node = null;\r\n    @property(cc.Node)\r\n    tips: cc.Node = null;\r\n    @property(cc.Node)\r\n    container: cc.Node = null;\r\n    @property(cc.Node)\r\n    completeIcon: cc.Node = null;\r\n    @property(cc.Node)\r\n    flash: cc.Node = null;\r\n    @property(cc.Node)\r\n    mask1: cc.Node = null;\r\n    @property(cc.Node)\r\n    mask2: cc.Node = null;\r\n    @property(cc.Node)\r\n    line_left: cc.Node = null;\r\n    @property(cc.Node)\r\n    line_right: cc.Node = null;\r\n    @property(cc.Node)\r\n    line_left2: cc.Node = null;\r\n    @property(cc.Node)\r\n    line_right2: cc.Node = null;\r\n    @property(cc.Node)\r\n    line_rotate: cc.Node = null;\r\n    @property(cc.Node)\r\n    finger: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    HomeView: cc.Node = null;\r\n    @property(cc.Node)\r\n    LvlSelectView: cc.Node = null;\r\n    @property(cc.Node)\r\n    OverView: cc.Node = null;\r\n\r\n    static BaseUrl: string = \"textures/game/\";\r\n\r\n    private lvlSelectScript: LvlSelect;\r\n    private overScript: OverView;\r\n\r\n    private state: number;\r\n    private selected: string;\r\n    private prevPos: cc.Vec2;\r\n    private prevRot: number;\r\n    private posBeforeMove: cc.Vec2;\r\n    private winBar: cc.ProgressBar;\r\n    private prevProgress: number;\r\n    private winFlag: boolean;\r\n    private isWin: boolean;\r\n\r\n    /** load */\r\n    private level: number;\r\n    private lvlConf;\r\n    private items;\r\n    private itemsFrame;\r\n    private tipsFrame;\r\n    private winStep: number = 0.1;\r\n    private resCnt: number;\r\n\r\n    /** preload */\r\n    public level_preload: number;\r\n    private lvlConf_preload;\r\n    private items_preload;\r\n    private itemsFrame_preload;\r\n    private tipsFrame_preload;\r\n    private winStep_preload: number = 0.1;\r\n    private resCnt_preload: number;\r\n\r\n    public loadLvl: number;\r\n    public preLoadLvl: number;\r\n\r\n    private loadTimeStamp: number; // 资源加载时间戳，用于回调中标识确认\r\n    public loadTimeStamp_preload: number; // 资源加载时间戳，用于回调中标识确认\r\n\r\n    private canTouch: boolean = true;\r\n    private touchID: number = null;\r\n\r\n    start() {\r\n        // get script\r\n        !this.lvlSelectScript && (this.lvlSelectScript = this.LvlSelectView.getComponent(LvlSelect));\r\n        this.overScript = this.OverView.getComponent(OverView);\r\n\r\n        this.addBtnListener();\r\n        this.addRotListener();\r\n\r\n        // // btn hint animation\r\n        // this.btn_hint.runAction(cc.sequence(cc.scaleTo(0.5, 1.3), cc.scaleTo(0.5, 1)).repeatForever());\r\n    }\r\n\r\n    startGame(lvlIdx?: number) {\r\n        lvlIdx && (this.level = lvlIdx);\r\n        if (this.level > Global.config.MaxLevel) {\r\n            console.log('over max level', this.level);\r\n            this.node.active = false;\r\n            this.LvlSelectView.active = true;\r\n            return;\r\n        }\r\n        console.log('gameStart. level: ', this.level);\r\n        // update\r\n        this.lvlLabel.getComponent(cc.Label).string = '第 ' + this.level + ' 关';\r\n        // load\r\n        this.loadTimeStamp = Date.now();\r\n        this.loadStage(this.level, this.loadTimeStamp, false);\r\n    }\r\n\r\n    nextGame() {\r\n        this.level++;\r\n        if (this.level > Global.config.MaxLevel) {\r\n            console.log('over max level', this.level);\r\n            this.node.active = false;\r\n            this.LvlSelectView.active = true;\r\n            return;\r\n        }\r\n        this.startGame();\r\n    }\r\n\r\n    restartGame() {\r\n        // reset items\r\n        Object.keys(this.items).forEach(key => {\r\n            this.items[key].runAction(cc.moveTo(0.2, this.lvlConf.question[key].posX, this.lvlConf.question[key].posY));\r\n            this.items[key].runAction(cc.rotateTo(0.2, this.lvlConf.question[key].rot));\r\n        });\r\n        this.selected && (this.items[this.selected].color = new cc.Color(255, 255, 255));\r\n        // reset\r\n        this.reset();\r\n        if (Const.TutorialLvl.indexOf(this.level) >= 0) {\r\n            // show tutorial\r\n            this.schedule(() => { this.showTutorial(this.level) }, 0.21, 0);\r\n        }\r\n    }\r\n\r\n    private reset() {\r\n        this.isWin = false;\r\n        !this.winBar && (this.winBar = this.progressBar.getComponent(cc.ProgressBar));\r\n        this.completeIcon.active = false;\r\n        this.winBar.progress = 0;\r\n        this.selected = null;\r\n        this.btn_restart.active = false;\r\n        this.btn_back.active = true;\r\n        this.tips.active = false;\r\n        this.btn_hint.active = true;\r\n        this.flash.active = false;\r\n        this.canTouch = true;\r\n    }\r\n\r\n    // preload(lvlIdx: number) {\r\n    //     if (lvlIdx > Global.config.MaxLevel || lvlIdx === this.preLoadLvl) return;\r\n    //     console.log('preload start. level: ', lvlIdx);\r\n\r\n    //     this.preLoadLvl = lvlIdx;\r\n    //     this.resCnt_preload = 0;\r\n    //     cc.loader.load(GameView.BaseUrl + 'question/level' + lvlIdx + '/config.json', (err, res) => {\r\n    //         if (err) { console.error('load conf error:', err) };\r\n    //         this.lvlConf_preload = res;\r\n    //         console.log('>>> [preload] conf: ', this.lvlConf_preload);\r\n\r\n    //         // reset\r\n    //         this.items_preload = {};\r\n    //         this.itemsFrame_preload = {};\r\n\r\n    //         // solution\r\n    //         !this.lvlSelectScript && (this.lvlSelectScript = this.LvlSelectView.getComponent(LvlSelect));\r\n    //         cc.loader.load(GameView.BaseUrl + 'solution/' + this.lvlSelectScript.titleJson[lvlIdx] + '.png', (error, res1) => {\r\n    //             if (error) { console.error('preload solution error:', this.lvlSelectScript.titleJson[lvlIdx], error) };\r\n    //             (this.preLoadLvl == lvlIdx) && this.resCnt_preload++;\r\n    //             console.log('preload solution done. level: ' + lvlIdx + ' loadedCnt: ' + this.resCnt_preload + '/2');\r\n    //             this.tipsFrame_preload = new cc.SpriteFrame(res1);\r\n    //         });\r\n\r\n    //         // question item\r\n    //         let urls = [], names = [];\r\n    //         Object.keys(this.lvlConf_preload.question).forEach(v => {\r\n    //             names.push(v);\r\n    //             urls.push(GameView.BaseUrl + 'question/level' + lvlIdx + '/' + v + '.png');\r\n    //         });\r\n    //         console.log('>>> [preload] urls:', urls);\r\n    //         cc.loader.load(urls, (err, assets) => {\r\n    //             if (err) { console.error('preload question error:', lvlIdx, err) };\r\n    //             (this.preLoadLvl == lvlIdx) && this.resCnt_preload++;\r\n    //             console.log('preload question done. level: ' + lvlIdx + ' loadedCnt: ' + this.resCnt_preload + '/2');\r\n    //             // get each item\r\n    //             urls.forEach((url, i) => {\r\n    //                 let tex: cc.Texture2D = assets.getContent(url);\r\n    //                 if (this.lvlConf_preload.question[names[i]]) {\r\n    //                     let item = new cc.Node(names[i]);\r\n    //                     let sp = item.addComponent(cc.Sprite);\r\n    //                     sp.spriteFrame = new cc.SpriteFrame(tex);\r\n    //                     this.items_preload[names[i]] = item;\r\n    //                     this.itemsFrame_preload[names[i]] = 'question';\r\n    //                     // set transform\r\n    //                     item.x = this.lvlConf_preload.question[names[i]].posX;\r\n    //                     item.y = this.lvlConf_preload.question[names[i]].posY;\r\n    //                     item.rotation = (this.lvlConf_preload.question[names[i]].rot + 360) % 360;\r\n    //                     item.zIndex = this.lvlConf_preload.question[names[i]].zIndex;\r\n    //                     // add listener\r\n    //                     this.addItemListener(item);\r\n    //                 }\r\n    //             })\r\n    //             // set win step\r\n    //             let len = Object.keys(this.lvlConf_preload.solution).length;\r\n    //             this.winStep_preload = 0.9 / (len * len); // (len*(len-1))/(1*2) * 2 + len\r\n    //         });\r\n    //     });\r\n    // }\r\n\r\n    private showNetErr() {\r\n        CC_WECHATGAME && wx.showToast && wx.showToast({\r\n            title: '请检查网络',\r\n            icon: 'fail',\r\n        })\r\n    }\r\n\r\n    private hideTutorial() {\r\n        this.mask1.active = false;\r\n        this.mask2.active = false;\r\n        this.line_left.active = false;\r\n        this.line_right.active = false;\r\n        this.line_left2.active = false;\r\n        this.line_right2.active = false;\r\n        this.line_rotate.active = false;\r\n        this.finger.active = false;\r\n        this.finger.stopAllActions();\r\n        this.unscheduleAllCallbacks();\r\n    }\r\n\r\n    private showTutorial(lvlIdx: number) {\r\n        this.hideTutorial();\r\n        switch (lvlIdx) {\r\n            case 1:\r\n                this.mask1.active = true;\r\n                let item = this.container.getChildByName('3');\r\n                this.line_left.active = true;\r\n                this.line_left.x = item.x;\r\n                this.line_left.y = item.y;\r\n                // finger animation\r\n                this.finger.active = true;\r\n                let srcPos1 = item.getPosition().clone();\r\n                let dstPos1 = new cc.Vec2(this.lvlConf.solution['3'].posX, this.lvlConf.solution['3'].posY);\r\n                let tmpPos1 = new cc.Vec2((this.lvlConf.solution['3'].posX - item.x) / 2 - 200, (this.lvlConf.solution['3'].posY - item.y) / 3);\r\n                this.finger.setPosition(srcPos1);\r\n                let play1 = () => {\r\n                    this.finger.setPosition(srcPos1);\r\n                    this.finger.runAction(cc.bezierTo(0.5, [srcPos1, tmpPos1, dstPos1]));\r\n                }\r\n                this.schedule(play1, 1, cc.macro.REPEAT_FOREVER, 0);\r\n                // add listener\r\n                item && this.addItemListener(item, () => {\r\n                    this.setSelectFramePos();\r\n                    this.updateProgress();\r\n                    item.color = new cc.Color(255, 255, 255);\r\n                    item.off(cc.Node.EventType.TOUCH_START), item.off(cc.Node.EventType.TOUCH_MOVE), item.off(cc.Node.EventType.TOUCH_CANCEL), item.off(cc.Node.EventType.TOUCH_END);\r\n                    this.selected = null;\r\n                    item.runAction(cc.moveTo(0.2, this.lvlConf.solution['3'].posX, this.lvlConf.solution['3'].posY));\r\n                    this.schedule(() => {\r\n                        this.line_left.active = false;\r\n                        this.finger.stopAllActions();\r\n                        this.unscheduleAllCallbacks();\r\n                        // this.unschedule(play1);\r\n                        let item2 = this.container.getChildByName('1');\r\n                        item2 && this.addItemListener(item2);\r\n                        this.line_right.active = true;\r\n                        this.line_right.x = item2.x;\r\n                        this.line_right.y = item2.y;\r\n                        // finger animation\r\n                        let srcPos2 = item2.getPosition().clone();\r\n                        let dstPos2 = new cc.Vec2(this.lvlConf.solution['1'].posX, this.lvlConf.solution['1'].posY);\r\n                        let tmpPos2 = new cc.Vec2((this.lvlConf.solution['1'].posX - item2.x) / 2 + 300, (this.lvlConf.solution['1'].posY - item2.y) / 3);\r\n                        this.finger.setPosition(srcPos2);\r\n                        let play2 = () => {\r\n                            this.finger.setPosition(srcPos2);\r\n                            this.finger.runAction(cc.bezierTo(0.5, [srcPos2, tmpPos2, dstPos2]));\r\n                        }\r\n                        this.schedule(play2, 1, cc.macro.REPEAT_FOREVER, 0);\r\n                    }, 0.2, 0);\r\n                });\r\n                break;\r\n            case 5:\r\n                this.mask1.active = true;\r\n                let item3 = this.container.getChildByName('3');\r\n                this.line_left2.active = true;\r\n                this.line_left2.x = item3.x;\r\n                this.line_left2.y = item3.y;\r\n                // finger animation\r\n                this.finger.active = true;\r\n                let srcPos = item3.getPosition().clone();\r\n                let dstPos = new cc.Vec2(this.lvlConf.solution['3'].posX, this.lvlConf.solution['3'].posY);\r\n                let tmpPos = new cc.Vec2((this.lvlConf.solution['3'].posX - item3.x) / 2 - 300, (this.lvlConf.solution['3'].posY - item3.y) / 3);\r\n                this.finger.setPosition(srcPos);\r\n                let play3 = () => {\r\n                    this.finger.setPosition(srcPos);\r\n                    this.finger.runAction(cc.bezierTo(0.5, [srcPos, tmpPos, dstPos]));\r\n                }\r\n                this.schedule(play3, 1, cc.macro.REPEAT_FOREVER, 0);\r\n                // add listener\r\n                item3 && this.addItemListener(item3, () => {\r\n                    this.setSelectFramePos();\r\n                    this.updateProgress();\r\n                    item3.color = new cc.Color(255, 255, 255);\r\n                    item3.off(cc.Node.EventType.TOUCH_START), item3.off(cc.Node.EventType.TOUCH_MOVE), item3.off(cc.Node.EventType.TOUCH_CANCEL), item3.off(cc.Node.EventType.TOUCH_END);\r\n                    this.selected = null;\r\n                    item3.runAction(cc.moveTo(0.2, this.lvlConf.solution['3'].posX, this.lvlConf.solution['3'].posY));\r\n                    this.schedule(() => {\r\n                        this.line_left2.active = false;\r\n                        this.finger.stopAllActions();\r\n                        this.unscheduleAllCallbacks();\r\n                        // this.unschedule(play1);\r\n                        let item2 = this.container.getChildByName('1');\r\n                        this.line_right2.active = true;\r\n                        this.line_right2.x = item2.x;\r\n                        this.line_right2.y = item2.y;\r\n                        // finger animation\r\n                        let srcPos2 = item2.getPosition().clone();\r\n                        let dstPos2 = new cc.Vec2(this.lvlConf.solution['1'].posX, this.lvlConf.solution['1'].posY);\r\n                        let tmpPos2 = new cc.Vec2((this.lvlConf.solution['1'].posX - item2.x) / 2 + 300, (this.lvlConf.solution['1'].posY - item2.y) / 3);\r\n                        this.finger.setPosition(srcPos2);\r\n                        let play2 = () => {\r\n                            this.finger.setPosition(srcPos2);\r\n                            this.finger.runAction(cc.bezierTo(0.5, [srcPos2, tmpPos2, dstPos2]));\r\n                        }\r\n                        this.schedule(play2, 1, cc.macro.REPEAT_FOREVER, 0);\r\n                        // add listener\r\n                        item2 && this.addItemListener(item2, () => {\r\n                            this.setSelectFramePos();\r\n                            this.updateProgress();\r\n                            item2.runAction(cc.moveTo(0.2, this.lvlConf.solution['1'].posX, this.lvlConf.solution['1'].posY));\r\n                            this.schedule(() => {\r\n                                this.mask1.active = false;\r\n                                this.mask2.active = true;\r\n                                this.line_right2.active = false;\r\n                                this.finger.stopAllActions();\r\n                                this.unscheduleAllCallbacks();\r\n                                // this.unschedule(play1);\r\n                                this.line_rotate.active = true;\r\n                                this.line_rotate.x = item2.x;\r\n                                this.line_rotate.y = item2.y;\r\n                                // finger animation\r\n                                let srcPos3 = new cc.Vec2(item2.x + 150, item2.y + 50);\r\n                                let tmpPos3 = new cc.Vec2(item2.x + 120, item2.y - 120);\r\n                                let dstPos3 = new cc.Vec2(item2.x - 50, item2.y - 150);\r\n                                this.finger.setPosition(srcPos3);\r\n                                let play2 = () => {\r\n                                    this.finger.setPosition(srcPos3);\r\n                                    this.finger.runAction(cc.bezierTo(0.5, [srcPos3, tmpPos3, dstPos3]));\r\n                                }\r\n                                this.schedule(play2, 1, cc.macro.REPEAT_FOREVER, 0);\r\n                            }, 0.2, 0);\r\n                        });\r\n                    }, 0.2, 0);\r\n                });\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    loadStage(lvlIdx: number, timeStamp: number, isPreload: boolean = false) {\r\n        let log_prefix = isPreload ? 'preload' : 'load';\r\n        let key_suffix = isPreload ? '_preload' : '';\r\n        let isTutorialLvl: boolean = Const.TutorialLvl.indexOf(lvlIdx) >= 0;\r\n\r\n        // reset\r\n        this.reset();\r\n\r\n        // [load] already preloaded: assign preload to load\r\n        if (!isPreload && this.level_preload == lvlIdx && this.resCnt_preload >= 2) {\r\n            console.log('show preload', this.lvlConf_preload);\r\n            // level config\r\n            this.lvlConf = this.lvlConf_preload;\r\n            this.lvlConf_preload = null;\r\n            this.title.getComponent(cc.Label).string = this.lvlConf.title;\r\n            this.title.active = true;\r\n            // play title animation\r\n            this.title.scale = 2.5;\r\n            this.title.runAction(cc.sequence(cc.scaleTo(0.2, 0.9), cc.scaleTo(0.05, 1.05), cc.scaleTo(0.05, 1)));\r\n\r\n            // solution\r\n            this.tipsFrame = this.tipsFrame_preload;\r\n            this.tipsFrame_preload = null;\r\n            this.tips.getComponent(cc.Sprite).spriteFrame = this.tipsFrame.clone();\r\n            !this.overScript && (this.overScript = this.OverView.getComponent(OverView));\r\n            this.overScript.setFrame(lvlIdx);\r\n            // question item\r\n            this.items = this.items_preload;\r\n            this.items_preload = null;\r\n            this.itemsFrame = this.itemsFrame_preload;\r\n            this.itemsFrame_preload = null;\r\n            Object.keys(this.items).forEach(key => {\r\n                this.container.addChild(this.items[key]);\r\n            });\r\n            this.winStep = this.winStep_preload;\r\n\r\n            // show tutorial\r\n            isTutorialLvl && this.showTutorial(lvlIdx);\r\n\r\n            // preload next lvl\r\n            this.level_preload = lvlIdx + 1;\r\n            this.loadTimeStamp_preload = Date.now();\r\n            this.loadStage(this.level_preload, this.loadTimeStamp_preload, true);\r\n\r\n            return;\r\n        }\r\n\r\n        // [load] level lvlIdx unloaded or [preload]\r\n        !isPreload && CC_WECHATGAME && wx.showLoading && wx.showLoading({ title: '加载中' });\r\n        console.log(log_prefix + ' start. level: ', lvlIdx);\r\n        this['resCnt' + key_suffix] = 0;\r\n        cc.loader.load(GameView.BaseUrl + 'question/level' + lvlIdx + '/config.json', (err, confJson) => {\r\n            if (err) {\r\n                console.error(log_prefix + ' conf error:', err);\r\n                if (!isPreload && CC_WECHATGAME) {\r\n                    wx.hideLoading && wx.hideLoading();\r\n                    this.showNetErr();\r\n                    return;\r\n                }\r\n            };\r\n            // 已重新发起加载，前次加载弃用\r\n            if (timeStamp !== this['loadTimeStamp' + key_suffix]) return;\r\n\r\n            this['lvlConf' + key_suffix] = confJson;\r\n            console.log('>>> [' + log_prefix + '] conf: ', this['lvlConf' + key_suffix]);\r\n\r\n            if (!isPreload) {\r\n                this.title.getComponent(cc.Label).string = this.lvlConf.title;\r\n                this.title.active = true;\r\n                // play title animation\r\n                this.title.scale = 2.5;\r\n                this.title.runAction(cc.sequence(cc.scaleTo(0.2, 0.9), cc.scaleTo(0.05, 1.05), cc.scaleTo(0.05, 1)));\r\n            }\r\n\r\n            this['items' + key_suffix] = {};\r\n            this['itemsFrame' + key_suffix] = {};\r\n\r\n            // solution\r\n            !this.lvlSelectScript && (this.lvlSelectScript = this.LvlSelectView.getComponent(LvlSelect));\r\n            cc.loader.load(GameView.BaseUrl + 'solution/' + this.lvlSelectScript.titleJson[lvlIdx] + '.png', (error, tex) => {\r\n                if (error) {\r\n                    console.error(log_prefix + ' solution error:', this.lvlSelectScript.titleJson[lvlIdx], error);\r\n                    if (!isPreload && CC_WECHATGAME) {\r\n                        wx.hideLoading && wx.hideLoading();\r\n                        this.showNetErr();\r\n                        return;\r\n                    }\r\n                };\r\n                // 已重新发起加载，前次加载弃用\r\n                if (timeStamp !== this['loadTimeStamp' + key_suffix]) return;\r\n\r\n                this['resCnt' + key_suffix]++;\r\n                console.log(log_prefix + ' solution done. level: ' + lvlIdx + ' loadedCnt: ' + this['resCnt' + key_suffix] + '/2');\r\n                this['tipsFrame' + key_suffix] = new cc.SpriteFrame(tex);\r\n                if (!isPreload) {\r\n                    this.tips.getComponent(cc.Sprite).spriteFrame = this.tipsFrame.clone();\r\n                    !this.overScript && (this.overScript = this.OverView.getComponent(OverView));\r\n                    this.overScript.setFrame(lvlIdx);\r\n                }\r\n            });\r\n\r\n            // question item\r\n            let urls = [], names = [];\r\n            Object.keys(this['lvlConf' + key_suffix].question).forEach(v => {\r\n                names.push(v);\r\n                urls.push(GameView.BaseUrl + 'question/level' + lvlIdx + '/' + v + '.png');\r\n            });\r\n            console.log('>>> [' + log_prefix + '] urls:', urls);\r\n            cc.loader.load(urls, (err2, assets) => {\r\n                if (err2) {\r\n                    console.error(log_prefix + ' question error:', lvlIdx, err2);\r\n                    if (!isPreload && CC_WECHATGAME) {\r\n                        wx.hideLoading && wx.hideLoading();\r\n                        this.showNetErr();\r\n                        return;\r\n                    }\r\n                };\r\n                // 已重新发起加载，前次加载弃用\r\n                if (timeStamp !== this['loadTimeStamp' + key_suffix]) return;\r\n                // 加载完成\r\n                !isPreload && CC_WECHATGAME && wx.hideLoading && wx.hideLoading();\r\n\r\n                this['resCnt' + key_suffix]++;\r\n                console.log(log_prefix + ' question done. level: ' + lvlIdx + ' loadedCnt: ' + this['resCnt' + key_suffix] + '/2');\r\n                // get each item\r\n                urls.forEach((url, idx) => {\r\n                    let tex: cc.Texture2D = assets.getContent(url);\r\n                    // if (this['lvlConf' + key_suffix].question[names[idx]]) {\r\n                    // create node\r\n                    let item = new cc.Node(names[idx]);\r\n                    let sp = item.addComponent(cc.Sprite);\r\n                    sp.spriteFrame = new cc.SpriteFrame(tex);\r\n                    this['items' + key_suffix][names[idx]] = item;\r\n                    this['itemsFrame' + key_suffix][names[idx]] = 'question';\r\n                    // set transform\r\n                    item.x = this['lvlConf' + key_suffix].question[names[idx]].posX;\r\n                    item.y = this['lvlConf' + key_suffix].question[names[idx]].posY;\r\n                    item.rotation = (this['lvlConf' + key_suffix].question[names[idx]].rot + 360) % 360;\r\n                    item.zIndex = this['lvlConf' + key_suffix].question[names[idx]].zIndex;\r\n                    // add listener\r\n                    !isTutorialLvl && this.addItemListener(item);\r\n                    // add to scene\r\n                    !isPreload && this.container.addChild(item);\r\n                    // }\r\n                });\r\n                // set win step\r\n                let len = Object.keys(this['lvlConf' + key_suffix].solution).length;\r\n                this['winStep' + key_suffix] = 0.9 / (len * len); // (len*(len-1))/(1*2) * 2 + len\r\n\r\n                // show tutorial\r\n                !isPreload && isTutorialLvl && this.showTutorial(lvlIdx);\r\n\r\n                // preload next lvl\r\n                if (!isPreload) {\r\n                    this.level_preload = lvlIdx + 1;\r\n                    this.loadTimeStamp_preload = Date.now();\r\n                    this.loadStage(this.level_preload, this.loadTimeStamp_preload, true);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    private clearStage() {\r\n        console.log('clearStage');\r\n        this.title.active = false;\r\n        this.container.removeAllChildren();\r\n    }\r\n\r\n    // add item listener: select and transpostion\r\n    private addItemListener(item: cc.Node, cb?: Function) {\r\n        item.on(cc.Node.EventType.TOUCH_START, (e: cc.Event.EventTouch) => {\r\n            e.stopPropagation();\r\n            this.touchID == null && (this.touchID = e.getID());\r\n            if (this.touchID != e.getID()) return;\r\n            if (!this.canTouch) return;\r\n\r\n            this.selected && (this.items[this.selected].color = new cc.Color(255, 255, 255));\r\n            this.selected = item.name;\r\n            item.color = new cc.Color(180, 180, 180);\r\n            // set pos\r\n            this.prevPos = (e.target.parent as cc.Node).convertToNodeSpaceAR(e.getLocation()).clone();\r\n            this.posBeforeMove = item.getPosition().clone();\r\n        });\r\n        item.on(cc.Node.EventType.TOUCH_MOVE, (e: cc.Event.EventTouch) => {\r\n            e.stopPropagation();\r\n            if (this.touchID != e.getID()) return;\r\n            if (!this.canTouch) return;\r\n\r\n            let currPos: cc.Vec2 = (e.target.parent as cc.Node).convertToNodeSpaceAR(e.getLocation());\r\n            item.x += (currPos.x - this.prevPos.x);\r\n            item.y += (currPos.y - this.prevPos.y);\r\n            // update pos\r\n            this.prevPos.x = currPos.x;\r\n            this.prevPos.y = currPos.y;\r\n            this.setSelectFramePos();\r\n            // update progressBar\r\n            this.updateProgress();\r\n        });\r\n        item.on(cc.Node.EventType.TOUCH_END, (e: cc.Event.EventTouch) => {\r\n            e.stopPropagation();\r\n            if (this.touchID != e.getID()) return;\r\n            this.touchID = null;\r\n            if (!this.canTouch) return;\r\n\r\n            this.selected = item.name;\r\n            // is pos valid\r\n            if (this.itemsFrame[this.selected]) {\r\n                cb && this.itemsFrame[this.selected] == 'solution' && cb();\r\n                AudioMgr.instance.play('move');\r\n                // on btn_restart\r\n                !this.btn_restart.active && (this.btn_restart.active = true);\r\n                // update progressBar\r\n                this.updateProgress();\r\n                // win check\r\n                this.winCheck();\r\n            } else {\r\n                AudioMgr.instance.play('close');\r\n                // pos rollback\r\n                item.runAction(cc.moveTo(0.2, this.posBeforeMove));\r\n                this.schedule(() => {\r\n                    this.setSelectFramePos();\r\n                    // update progressBar\r\n                    this.updateProgress();\r\n                }, 0.2, 0);\r\n            }\r\n            this.prevProgress = this.winBar.progress;\r\n        });\r\n        item.on(cc.Node.EventType.TOUCH_CANCEL, (e: cc.Event.EventTouch) => {\r\n            e.stopPropagation();\r\n            if (this.touchID != e.getID()) return;\r\n            this.touchID = null;\r\n            if (!this.canTouch) return;\r\n\r\n            this.selected = item.name;\r\n            // is pos valid\r\n            if (this.itemsFrame[this.selected]) {\r\n                AudioMgr.instance.play('move');\r\n                cb && this.itemsFrame[this.selected] == 'solution' && cb();\r\n                // on btn_restart\r\n                !this.btn_restart.active && (this.btn_restart.active = true);\r\n                // update progressBar\r\n                this.updateProgress();\r\n                // win check\r\n                this.winCheck();\r\n            } else {\r\n                AudioMgr.instance.play('close');\r\n                // pos rollback\r\n                item.runAction(cc.moveTo(0.2, this.posBeforeMove));\r\n                this.schedule(() => {\r\n                    this.setSelectFramePos();\r\n                    // update progressBar\r\n                    this.updateProgress();\r\n                }, 0.2, 0);\r\n            }\r\n            this.prevProgress = this.winBar.progress;\r\n        });\r\n    }\r\n\r\n    // add stage listener: rotation\r\n    private addRotListener() {\r\n        this.node.on(cc.Node.EventType.TOUCH_START, (e: cc.Event.EventTouch) => {\r\n            e.stopPropagation();\r\n            this.touchID == null && (this.touchID = e.getID());\r\n            if (this.touchID != e.getID()) return;\r\n            if (!this.canTouch) return;\r\n            if (this.selected && this.items[this.selected]) {\r\n                // set rot\r\n                let pos = (e.target.parent as cc.Node).convertToNodeSpaceAR(e.getLocation());\r\n                let deltaX = pos.x - this.items[this.selected].x;\r\n                let deltaY = pos.y - this.items[this.selected].y;\r\n                this.prevRot = Math.atan2(deltaX, deltaY) / Math.PI * 180;\r\n            }\r\n        });\r\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, (e: cc.Event.EventTouch) => {\r\n            e.stopPropagation();\r\n            if (this.touchID != e.getID()) return;\r\n            if (!this.canTouch) return;\r\n            if (this.selected && this.items[this.selected]) {\r\n                // update rot\r\n                let pos = (e.target.parent as cc.Node).convertToNodeSpaceAR(e.getLocation());\r\n                let deltaX = pos.x - this.items[this.selected].x;\r\n                let deltaY = pos.y - this.items[this.selected].y;\r\n                let currRot = Math.atan2(deltaX, deltaY) / Math.PI * 180;\r\n                let deltaRot = currRot - this.prevRot;\r\n                deltaRot > 180 && (deltaRot -= 360);\r\n                deltaRot < -180 && (deltaRot += 360);\r\n                this.items[this.selected].rotation += deltaRot;\r\n                this.items[this.selected].rotation = this.items[this.selected].rotation % 360;\r\n                this.prevRot = currRot;\r\n                // update progressBar\r\n                this.updateProgress();\r\n            }\r\n        });\r\n        this.node.on(cc.Node.EventType.TOUCH_END, (e: cc.Event.EventTouch) => {\r\n            e.stopPropagation();\r\n            if (this.touchID != e.getID()) return;\r\n            this.touchID = null;\r\n            if (!this.canTouch) return;\r\n            if (this.selected && this.items[this.selected]) {\r\n                this.winCheck();\r\n            }\r\n        });\r\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL, (e: cc.Event.EventTouch) => {\r\n            e.stopPropagation();\r\n            if (this.touchID != e.getID()) return;\r\n            this.touchID = null;\r\n            if (!this.canTouch) return;\r\n            if (this.selected && this.items[this.selected]) {\r\n                this.winCheck();\r\n            }\r\n        });\r\n    }\r\n\r\n    private addBtnListener() {\r\n        // btn back\r\n        this.btn_back.on(cc.Node.EventType.TOUCH_START, (e) => {\r\n            e.stopPropagation();\r\n            this.touchID == null && (this.touchID = e.getID());\r\n            if (this.touchID != e.getID()) return;\r\n            this.btn_back.color = new cc.Color(180, 180, 180);\r\n        });\r\n        this.btn_back.on(cc.Node.EventType.TOUCH_CANCEL, (e) => {\r\n            e.stopPropagation();\r\n            if (this.touchID != e.getID()) return;\r\n            this.touchID = null;\r\n            this.btn_back.color = new cc.Color(255, 255, 255);\r\n        });\r\n        this.btn_back.on(cc.Node.EventType.TOUCH_END, (e) => {\r\n            e.stopPropagation();\r\n            if (this.touchID != e.getID()) return;\r\n            this.touchID = null;\r\n            this.btn_back.color = new cc.Color(255, 255, 255);\r\n\r\n            AudioMgr.instance.play('button');\r\n            this.clearStage();\r\n            this.hideTutorial();\r\n            this.node.active = false;\r\n            this.LvlSelectView.active = true;\r\n        });\r\n        // btn restart\r\n        this.btn_restart.on(cc.Node.EventType.TOUCH_START, (e) => {\r\n            e.stopPropagation();\r\n            this.touchID == null && (this.touchID = e.getID());\r\n            if (this.touchID != e.getID()) return;\r\n            this.btn_restart.color = new cc.Color(180, 180, 180);\r\n        });\r\n        this.btn_restart.on(cc.Node.EventType.TOUCH_CANCEL, (e) => {\r\n            e.stopPropagation();\r\n            if (this.touchID != e.getID()) return;\r\n            this.touchID = null;\r\n            this.btn_restart.color = new cc.Color(255, 255, 255);\r\n        });\r\n        this.btn_restart.on(cc.Node.EventType.TOUCH_END, (e) => {\r\n            e.stopPropagation();\r\n            if (this.touchID != e.getID()) return;\r\n            this.touchID = null;\r\n            this.btn_restart.color = new cc.Color(255, 255, 255);\r\n            AudioMgr.instance.play('button');\r\n            this.restartGame();\r\n        });\r\n        // btn hint\r\n        this.btn_hint.on(cc.Node.EventType.TOUCH_START, (e) => {\r\n            e.stopPropagation();\r\n            this.touchID == null && (this.touchID = e.getID());\r\n            if (this.touchID != e.getID()) return;\r\n            let onTouch = () => {\r\n                AudioMgr.instance.play('hint');\r\n                this.btn_hint.active = false;\r\n                this.tips.active = true;\r\n            }\r\n            if (CC_WECHATGAME) {\r\n                if (Global.config.game_hint == 1 && this.canTouch) {\r\n                    // 未超过每天视频观看次数\r\n                    if (!Reward.instance.isOverVideo()) {\r\n                        this.canTouch = false;\r\n                        Reward.instance.video({\r\n                            pos: \"game_hint\",\r\n                            success: () => { onTouch(); },\r\n                            fail: () => {\r\n                                Reward.instance.share({\r\n                                    pos: \"game_hint\",\r\n                                    success: () => { onTouch(); },\r\n                                });\r\n                            },\r\n                            complete: () => {\r\n                                this.canTouch = true;\r\n                            }\r\n                        });\r\n                    }\r\n                    else {\r\n                        Reward.instance.share({\r\n                            pos: \"game_hint\",\r\n                            success: () => { onTouch(); },\r\n                        });\r\n                    }\r\n                }\r\n                // share\r\n                Global.config.game_hint == 2 && Reward.instance.share({\r\n                    pos: \"game_hint\",\r\n                    success: () => { onTouch(); },\r\n                });\r\n            } else {\r\n                onTouch();\r\n            }\r\n        });\r\n        this.btn_hint.on(cc.Node.EventType.TOUCH_CANCEL, (e) => {\r\n            e.stopPropagation();\r\n            if (this.touchID != e.getID()) return;\r\n            this.touchID = null;\r\n        });\r\n        this.btn_hint.on(cc.Node.EventType.TOUCH_END, (e) => {\r\n            e.stopPropagation();\r\n            if (this.touchID != e.getID()) return;\r\n            this.touchID = null;\r\n        });\r\n    }\r\n\r\n    // set selected pos in frame: question, solution or outside\r\n    private setSelectFramePos() {\r\n        let pos_question = this.frame_question.parent.convertToNodeSpace(this.items[this.selected].getPosition());\r\n        let pos_solution = this.frame_solution.parent.convertToNodeSpace(this.items[this.selected].getPosition());\r\n        // in frame soulution\r\n        if (Math.abs(pos_solution.x - this.frame_solution.x) < (this.frame_solution.width / 2 - Math.min(this.items[this.selected].width, this.items[this.selected].height, this.frame_solution.height * 0.15) / 2)\r\n            && Math.abs(pos_solution.y - this.frame_solution.y) < (this.frame_solution.height / 2 - Math.min(this.items[this.selected].width, this.items[this.selected].height, this.frame_solution.height * 0.15) / 2)) {\r\n            this.itemsFrame[this.selected] = 'solution';\r\n        }\r\n        // in frame question\r\n        else if (Math.abs(pos_question.x - this.frame_question.x) < (this.frame_question.width / 2 - Math.min(this.items[this.selected].width, this.items[this.selected].height, this.frame_question.height * 0.15) / 2)\r\n            && Math.abs(pos_question.y - this.frame_question.y) < (this.frame_question.height / 2 - Math.min(this.items[this.selected].width, this.items[this.selected].height, this.frame_question.height * 0.15) / 2)) {\r\n            this.itemsFrame[this.selected] = 'question';\r\n        } else { // outside\r\n            this.itemsFrame[this.selected] = null;\r\n        }\r\n    }\r\n\r\n    private updateProgress() {\r\n        let winCnt = 0;\r\n        this.winFlag = true;\r\n        let solutionItems = {};\r\n        Object.keys(this.itemsFrame).forEach(key => {\r\n            // all items in frame solution\r\n            if (this.itemsFrame[key] == 'solution') {\r\n                // right item\r\n                if (this.lvlConf.solution[key]) {\r\n                    // 1. check exist\r\n                    winCnt += this.winStep;\r\n                    Object.keys(solutionItems).forEach(keySol => {\r\n                        // 2. win check for two items\r\n                        let rot1 = this.lvlConf.solution[key].rot;\r\n                        let rot2 = this.lvlConf.solution[keySol].rot;\r\n                        // a. null: for angle 0 - 360\r\n                        if (rot1 == null) {\r\n                            let cnt = this.checkTwoItems(keySol, key);\r\n                            winCnt += this.winStep * cnt;\r\n                            cnt < 2 && (this.winFlag = false);\r\n                        }\r\n                        else if (rot2 == null) {\r\n                            let cnt = this.checkTwoItems(key, keySol);\r\n                            winCnt += this.winStep * cnt;\r\n                            cnt < 2 && (this.winFlag = false);\r\n                        }\r\n                        // b. number or Array<numer>\r\n                        else {\r\n                            let cnt = Math.min(this.checkTwoItems(keySol, key), this.checkTwoItems(key, keySol));\r\n                            winCnt += this.winStep * cnt;\r\n                            cnt < 2 && (this.winFlag = false);\r\n                        }\r\n                    });\r\n                    solutionItems[key] = this.items[key];\r\n                }\r\n                // wrong item\r\n                else {\r\n                    winCnt -= this.winStep * 2;\r\n                    this.winFlag = false;\r\n                }\r\n            }\r\n            // not all right items found\r\n            else if (this.lvlConf.solution[key]) {\r\n                // console.log('unfound item:', key)\r\n                this.winFlag = false;\r\n            }\r\n        });\r\n        winCnt >= 1 && (winCnt = 0.9);\r\n        winCnt < 0 && (winCnt = 0);\r\n        this.winBar.progress = this.winFlag ? 1 : winCnt;\r\n        this.completeIcon.active = this.winBar.progress == 1 ? true : false;\r\n    }\r\n\r\n    // check pos and angle for two items, return value: 0, 1, 2\r\n    private checkTwoItems(key1, key2): number {\r\n        let cnt = 0;\r\n        let rot1 = this.lvlConf.solution[key1].rot;\r\n        let rot2 = this.lvlConf.solution[key2].rot;\r\n        let deltaRot = ((this.items[key2].rotation - this.items[key1].rotation) + 720) % 360;\r\n        // a. angle type null: 无指向性, 仅判断距离\r\n        if (rot1 == null) {\r\n            cnt++;\r\n            this.checkPos(key1, key2, rot1) && cnt++;\r\n        }\r\n        // b. angle1 type number: conver to node space: 参照item1局部坐标系标记item2位置\r\n        else if (typeof rot1 == 'number') {\r\n            /** check pos */\r\n            this.checkPos(key1, key2, rot1) && cnt++;\r\n            /** check rot */\r\n            if (rot2 == null) {\r\n                cnt++;\r\n            }\r\n            else if (typeof rot2 == 'number') {\r\n                if (this.checkRot(rot1, rot2, deltaRot)) {\r\n                    cnt++;\r\n                }\r\n            } else {\r\n                for (let j = 0; j < rot2.length; j++) {\r\n                    if (this.checkRot(rot1, rot2[j], deltaRot)) {\r\n                        cnt++;\r\n                        break;\r\n                    }\r\n                };\r\n            }\r\n        }\r\n        // c. angle1 type Array<number>: conver to node space: 参照item1局部坐标系标记item2位置\r\n        else {\r\n            let flag_pos = true, flag_rot = true;\r\n            for (let i = 0; (flag_pos || flag_rot) && i < rot1.length; i++) {\r\n                /** check pos */\r\n                if (flag_pos) {\r\n                    if (this.checkPos(key1, key2, rot1[i])) {\r\n                        flag_pos = false;\r\n                        cnt++;\r\n                    }\r\n                }\r\n                /** check rot */\r\n                if (flag_rot) {\r\n                    if (rot2 == null) {\r\n                        flag_rot = false;\r\n                        cnt++;\r\n                    }\r\n                    else if (typeof rot2 == 'number') {\r\n                        if (this.checkRot(rot1[i], rot2, deltaRot)) {\r\n                            flag_rot = false;\r\n                            cnt++;\r\n                        }\r\n                    } else {\r\n                        for (let j = 0; flag_rot && j < rot2.length; j++) {\r\n                            if (this.checkRot(rot1[i], rot2[j], deltaRot)) {\r\n                                flag_rot = false;\r\n                                cnt++;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return cnt;\r\n    }\r\n\r\n    private checkPos(key1, key2, rot1): boolean {\r\n        let dist;\r\n        let pos1 = this.items[key1].convertToWorldSpaceAR(new cc.Vec2(0, 0));\r\n        let pos2 = this.items[key2].convertToWorldSpaceAR(new cc.Vec2(0, 0));\r\n        let vecX = pos2.x - pos1.x;\r\n        let vecY = pos2.y - pos1.y;\r\n        let vecX_conf = this.lvlConf.solution[key2].posX - this.lvlConf.solution[key1].posX;\r\n        let vecY_conf = this.lvlConf.solution[key2].posY - this.lvlConf.solution[key1].posY;\r\n        // 角度360度有效，无指向性\r\n        if (rot1 == null) {\r\n            let dist1 = Math.sqrt(vecX * vecX + vecY * vecY);\r\n            let dist2 = Math.sqrt(vecX_conf * vecX_conf + vecY_conf * vecY_conf);\r\n            dist = Math.abs(dist1 - dist2);\r\n        } else {\r\n            // convert item2 to item1 space\r\n            let sin = Math.sin(this.items[key1].rotation * Math.PI / 180);\r\n            let cos = Math.cos(this.items[key1].rotation * Math.PI / 180);\r\n            let x1 = cos * vecX - sin * vecY;\r\n            let y1 = sin * vecX + cos * vecY;\r\n            // convert answer_item2 to answer_item1 space\r\n            sin = Math.sin(rot1 * Math.PI / 180);\r\n            cos = Math.cos(rot1 * Math.PI / 180);\r\n            let x2 = cos * vecX_conf - sin * vecY_conf;\r\n            let y2 = sin * vecX_conf + cos * vecY_conf;\r\n            // calc dist\r\n            dist = Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2));\r\n        }\r\n        // check\r\n        return dist < Const.WinDeltaDist\r\n    }\r\n\r\n    private checkRot(rot1, rot2, deltaRot): boolean {\r\n        let angle = Math.abs(deltaRot - (rot2 - rot1 + 720) % 360);\r\n        angle = Math.min(angle, Math.abs(angle - 360));\r\n        if (angle < Const.WinDeltaAngle) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private winCheck() {\r\n        if (!this.isWin && this.winBar.progress >= 1) {\r\n            // block touch\r\n            this.canTouch = false;\r\n            // play win animation\r\n            Object.keys(this.lvlConf.solution).forEach(key => {\r\n                this.items[key].runAction(cc.moveTo(0.2, this.lvlConf.solution[key].posX, this.lvlConf.solution[key].posY));\r\n                if (this.lvlConf.solution[key].rot != null) {\r\n                    typeof (this.lvlConf.solution[key].rot) == 'number' ? this.items[key].runAction(cc.rotateTo(0.2, this.lvlConf.solution[key].rot)) : this.items[key].runAction(cc.rotateTo(0.2, this.lvlConf.solution[key].rot[0]));\r\n                }\r\n            });\r\n            // reset\r\n            this.selected && (this.items[this.selected].color = new cc.Color(255, 255, 255));\r\n            this.tips.active = false;\r\n            // hide\r\n            this.btn_hint.active = false;\r\n            this.btn_restart.active = false;\r\n            this.btn_back.active = false;\r\n            this.hideTutorial();\r\n            // update\r\n            this.isWin = true;\r\n            if (this.level == Global.gameData.level) {\r\n                Global.gameData.level++;\r\n                Loading.updateGameData(true);\r\n                // this.lvlSelectScript.updateList(Global.gameData.level - 1, Global.gameData.level);\r\n                this.LvlSelectView.getChildByName('scrollView').getComponent(ScrollViewBetter).updateItemsContent();\r\n            }\r\n            // play sound\r\n            AudioMgr.instance.play('win');\r\n            // show win animation\r\n            this.flash.active = true;\r\n            this.schedule(() => { this.flash.rotation += 1.5 }, 0.03, 100);\r\n            // show overView\r\n            let showNext: Function = () => {\r\n                // clear\r\n                this.clearStage();\r\n                this.unschedule(showNext);\r\n                this.flash.active = false;\r\n                // this.node.active = false;\r\n                this.OverView.active = true;\r\n            };\r\n            this.scheduleOnce(showNext, 2.5);\r\n            // post score\r\n            CC_WECHATGAME && ws.postGameScore({\r\n                key: 'clearStage',\r\n                id: Date.now() + \"\",\r\n                score: Global.gameData.level,\r\n            })\r\n        }\r\n    }\r\n\r\n    setState(state: number) {\r\n        this.state = state;\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}